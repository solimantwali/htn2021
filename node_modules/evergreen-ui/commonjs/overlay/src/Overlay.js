"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _typeof = require("@babel/runtime/helpers/typeof");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _glamor = require("glamor");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactTransitionGroup = require("react-transition-group");

var _uiBox = _interopRequireDefault(require("ui-box"));

var _constants = require("../../constants");

var _preventBodyScroll = _interopRequireDefault(require("../../lib/prevent-body-scroll"));

var _safeInvoke = _interopRequireDefault(require("../../lib/safe-invoke"));

var _portal = require("../../portal");

var _stack = require("../../stack");

var _theme = require("../../theme");

var _excluded = ["children", "containerProps", "preventBodyScrolling", "shouldCloseOnClick", "shouldCloseOnEscapePress", "onBeforeClose", "onExit", "onExiting", "onExited", "onEnter", "onEntering", "onEntered", "isShown"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var noop = function noop() {};

var emptyProps = {};
var animationEasing = {
  standard: 'cubic-bezier(0.4, 0.0, 0.2, 1)',
  deceleration: 'cubic-bezier(0.0, 0.0, 0.2, 1)',
  acceleration: 'cubic-bezier(0.4, 0.0, 1, 1)',
  sharp: 'cubic-bezier(0.4, 0.0, 0.6, 1)',
  spring: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'
};
var ANIMATION_DURATION = 240;

var fadeInAnimation = _glamor.css.keyframes('fadeInAnimation', {
  from: {
    opacity: 0
  },
  to: {
    opacity: 1
  }
});

var fadeOutAnimation = _glamor.css.keyframes('fadeOutAnimation', {
  from: {
    opacity: 1
  },
  to: {
    opacity: 0
  }
});

var animationStyles = function animationStyles(backgroundColor) {
  return {
    '&::before': {
      backgroundColor: backgroundColor,
      left: 0,
      top: 0,
      position: 'fixed',
      display: 'block',
      width: '100%',
      height: '100%',
      content: '" "'
    },
    '&[data-state="entering"]::before, &[data-state="entered"]::before': {
      animation: "".concat(fadeInAnimation, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.deceleration, " both")
    },
    '&[data-state="exiting"]::before, &[data-state="exited"]::before': {
      animation: "".concat(fadeOutAnimation, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.acceleration, " both")
    }
  };
};
/**
 * Overlay is essentially a wrapper around react-transition-group/Transition
 */


var Overlay = /*#__PURE__*/(0, _react.memo)(function Overlay(_ref) {
  var children = _ref.children,
      _ref$containerProps = _ref.containerProps,
      containerProps = _ref$containerProps === void 0 ? emptyProps : _ref$containerProps,
      _ref$preventBodyScrol = _ref.preventBodyScrolling,
      preventBodyScrolling = _ref$preventBodyScrol === void 0 ? false : _ref$preventBodyScrol,
      _ref$shouldCloseOnCli = _ref.shouldCloseOnClick,
      shouldCloseOnClick = _ref$shouldCloseOnCli === void 0 ? true : _ref$shouldCloseOnCli,
      _ref$shouldCloseOnEsc = _ref.shouldCloseOnEscapePress,
      shouldCloseOnEscapePress = _ref$shouldCloseOnEsc === void 0 ? true : _ref$shouldCloseOnEsc,
      onBeforeClose = _ref.onBeforeClose,
      _ref$onExit = _ref.onExit,
      onExit = _ref$onExit === void 0 ? noop : _ref$onExit,
      _ref$onExiting = _ref.onExiting,
      onExiting = _ref$onExiting === void 0 ? noop : _ref$onExiting,
      _ref$onExited = _ref.onExited,
      onExited = _ref$onExited === void 0 ? noop : _ref$onExited,
      _ref$onEnter = _ref.onEnter,
      onEnter = _ref$onEnter === void 0 ? noop : _ref$onEnter,
      _ref$onEntering = _ref.onEntering,
      onEntering = _ref$onEntering === void 0 ? noop : _ref$onEntering,
      _ref$onEntered = _ref.onEntered,
      onEntered = _ref$onEntered === void 0 ? noop : _ref$onEntered,
      isShown = _ref.isShown,
      props = (0, _objectWithoutProperties2["default"])(_ref, _excluded);
  var theme = (0, _theme.useTheme)();
  var colors = theme.colors;

  var _useState = (0, _react.useState)(null),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      previousActiveElement = _useState2[0],
      setPreviousActiveElement = _useState2[1];

  var _useState3 = (0, _react.useState)(isShown ? 'entering' : 'exited'),
      _useState4 = (0, _slicedToArray2["default"])(_useState3, 2),
      status = _useState4[0],
      setStatus = _useState4[1];

  var containerRef = (0, _react.useRef)(null);
  (0, _react.useEffect)(function () {
    if (isShown) {
      setStatus('entering');
    }
  }, [isShown]);

  var close = function close() {
    var shouldClose = (0, _safeInvoke["default"])(onBeforeClose);

    if (shouldClose !== false) {
      setStatus('exiting');
    }
  };

  var onEsc = function onEsc(event) {
    if (event.key === 'Escape' && shouldCloseOnEscapePress) {
      close();
    }
  };

  (0, _react.useEffect)(function () {
    if (status === 'entered') {
      setPreviousActiveElement(document.activeElement);
      bringFocusInsideOverlay();
    }

    if (status === 'entering') {
      document.body.addEventListener('keydown', onEsc, false);
    }

    if (status === 'exiting') {
      document.body.removeEventListener('keydown', onEsc, false);
      bringFocusBackToTarget();
    } // These missing deps *should* be okay (adding them would require other changes)
    // eslint-disable-next-line react-hooks/exhaustive-deps

  }, [status]); // ComponentWillUnmount

  (0, _react.useEffect)(function () {
    return function () {
      handleBodyScroll(false);
      document.body.removeEventListener('keydown', onEsc, false);
    };
  }, // These missing deps *should* be okay (adding them would require other changes)
  // eslint-disable-next-line react-hooks/exhaustive-deps
  []);
  /**
   * Methods borrowed from BlueprintJS
   * https://github.com/palantir/blueprint/blob/release/2.0.0/packages/core/src/components/overlay/overlay.tsx
   */

  var bringFocusInsideOverlay = function bringFocusInsideOverlay() {
    // Always delay focus manipulation to just before repaint to prevent scroll jumping
    return requestAnimationFrame(function () {
      // Container ref may be undefined between component mounting and Portal rendering
      // activeElement may be undefined in some rare cases in IE
      if (containerRef.current == null || // eslint-disable-line eqeqeq, no-eq-null
      document.activeElement == null || // eslint-disable-line eqeqeq, no-eq-null
      !isShown) {
        return;
      }

      var isFocusOutsideModal = !containerRef.current.contains(document.activeElement);

      if (isFocusOutsideModal) {
        // Element marked autofocus has higher priority than the other clowns
        var autofocusElement = containerRef.current.querySelector('[autofocus]');
        var wrapperElement = containerRef.current.querySelector('[tabindex]');
        var buttonElement = containerRef.current.querySelector('button');

        if (autofocusElement) {
          autofocusElement.focus();
        } else if (wrapperElement) {
          wrapperElement.focus();
        } else if (buttonElement) {
          buttonElement.focus();
        }
      }
    });
  };

  var bringFocusBackToTarget = function bringFocusBackToTarget() {
    return requestAnimationFrame(function () {
      if (previousActiveElement == null || // eslint-disable-line eqeqeq, no-eq-null
      containerRef.current == null || // eslint-disable-line eqeqeq, no-eq-null
      document.activeElement == null // eslint-disable-line eqeqeq, no-eq-null
      ) {
        return;
      } // Bring back focus on the target.


      var isFocusInsideModal = containerRef.current.contains(document.activeElement);

      if (document.activeElement === document.body || isFocusInsideModal) {
        previousActiveElement.focus();
      }
    });
  };

  var handleBodyScroll = function handleBodyScroll(preventScroll) {
    if (preventBodyScrolling) {
      (0, _preventBodyScroll["default"])(preventScroll);
    }
  };

  var handleEnter = function handleEnter(node, isAppearing) {
    handleBodyScroll(true);
    (0, _safeInvoke["default"])(onEnter, node, isAppearing);
  };

  var handleEntering = function handleEntering(node, isAppearing) {
    setStatus('entering');
    (0, _safeInvoke["default"])(onEntering, node, isAppearing);
  };

  var handleEntered = function handleEntered(node, isAppearing) {
    setStatus('entered');
    (0, _safeInvoke["default"])(onEntered, node, isAppearing);
  };

  var handleExit = function handleExit(node) {
    handleBodyScroll(false);
    (0, _safeInvoke["default"])(onExit, node);
  };

  var handleExiting = function handleExiting(node) {
    setStatus('exiting');
    (0, _safeInvoke["default"])(onExiting, node);
  };

  var handleExited = function handleExited(node) {
    setStatus('exited');
    (0, _safeInvoke["default"])(onExited, node);
  };

  var handleBackdropClick = function handleBackdropClick(event) {
    if (event.target !== event.currentTarget || !shouldCloseOnClick) {
      return;
    }

    close();
  };

  if (status === 'exited') {
    return null;
  }

  return /*#__PURE__*/_react["default"].createElement(_stack.Stack, {
    value: _constants.StackingOrder.OVERLAY
  }, function (zIndex) {
    return /*#__PURE__*/_react["default"].createElement(_portal.Portal, null, /*#__PURE__*/_react["default"].createElement(_reactTransitionGroup.Transition, {
      nodeRef: containerRef,
      appear: true,
      unmountOnExit: true,
      timeout: ANIMATION_DURATION,
      "in": isShown && status !== 'exiting',
      onExit: handleExit,
      onExiting: handleExiting,
      onExited: handleExited,
      onEnter: handleEnter,
      onEntering: handleEntering,
      onEntered: handleEntered
    }, function (state) {
      return /*#__PURE__*/_react["default"].createElement(_uiBox["default"], (0, _extends2["default"])({
        onClick: handleBackdropClick,
        ref: containerRef,
        position: "fixed",
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        zIndex: zIndex,
        "data-state": state
      }, containerProps, {
        className: (0, _classnames["default"])(containerProps.className, (0, _glamor.css)(animationStyles(colors.overlay)).toString())
      }), typeof children === 'function' ? children({
        state: state,
        close: close
      }) : children);
    }));
  });
});
Overlay.propTypes = {
  /**
   * Children can be a node or a function accepting `close: func`
   * and `state: ENTERING | ENTERED | EXITING | EXITED`.
   */
  children: _propTypes["default"].oneOfType([_propTypes["default"].node, _propTypes["default"].func]).isRequired,

  /**
   * Show the component; triggers the enter or exit states.
   */
  isShown: _propTypes["default"].bool,

  /**
   * Props to be passed through on the inner Box.
   */
  containerProps: _propTypes["default"].object,

  /**
   * Whether or not to prevent body scrolling outside the context of the overlay
   */
  preventBodyScrolling: _propTypes["default"].bool,

  /**
   * Boolean indicating if clicking the overlay should close the overlay.
   */
  shouldCloseOnClick: _propTypes["default"].bool,

  /**
   * Boolean indicating if pressing the esc key should close the overlay.
   */
  shouldCloseOnEscapePress: _propTypes["default"].bool,

  /**
   * Function called when overlay is about to close.
   * Return `false` to prevent the sheet from closing.
   * type: `Function -> Boolean`
   */
  onBeforeClose: _propTypes["default"].func,

  /**
   * Callback fired before the "exiting" status is applied.
   * type: `Function(node: HtmlElement) -> void`
   */
  onExit: _propTypes["default"].func,

  /**
   * Callback fired after the "exiting" status is applied.
   * type: `Function(node: HtmlElement) -> void`
   */
  onExiting: _propTypes["default"].func,

  /**
   * Callback fired after the "exited" status is applied.
   * type: `Function(exitState: Any?, node: HtmlElement) -> void`
   */
  onExited: _propTypes["default"].func,

  /**
   * Callback fired before the "entering" status is applied.
   * An extra parameter isAppearing is supplied to indicate if the enter stage
   * is occurring on the initial mount.
   *
   * type: `Function(node: HtmlElement, isAppearing: bool) -> void`
   */
  onEnter: _propTypes["default"].func,

  /**
   * Callback fired after the "entering" status is applied.
   * An extra parameter isAppearing is supplied to indicate if the enter stage
   * is occurring on the initial mount.
   *
   * type: `Function(node: HtmlElement, isAppearing: bool) -> void`
   */
  onEntering: _propTypes["default"].func,

  /**
   * Callback fired after the "entered" status is applied.
   * An extra parameter isAppearing is supplied to indicate if the enter stage
   * is occurring on the initial mount.
   *
   * type: `Function(node: HtmlElement, isAppearing: bool) -> void`
   */
  onEntered: _propTypes["default"].func
};
var _default = Overlay;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9vdmVybGF5L3NyYy9PdmVybGF5LmpzIl0sIm5hbWVzIjpbIm5vb3AiLCJlbXB0eVByb3BzIiwiYW5pbWF0aW9uRWFzaW5nIiwic3RhbmRhcmQiLCJkZWNlbGVyYXRpb24iLCJhY2NlbGVyYXRpb24iLCJzaGFycCIsInNwcmluZyIsIkFOSU1BVElPTl9EVVJBVElPTiIsImZhZGVJbkFuaW1hdGlvbiIsImNzcyIsImtleWZyYW1lcyIsImZyb20iLCJvcGFjaXR5IiwidG8iLCJmYWRlT3V0QW5pbWF0aW9uIiwiYW5pbWF0aW9uU3R5bGVzIiwiYmFja2dyb3VuZENvbG9yIiwibGVmdCIsInRvcCIsInBvc2l0aW9uIiwiZGlzcGxheSIsIndpZHRoIiwiaGVpZ2h0IiwiY29udGVudCIsImFuaW1hdGlvbiIsIk92ZXJsYXkiLCJjaGlsZHJlbiIsImNvbnRhaW5lclByb3BzIiwicHJldmVudEJvZHlTY3JvbGxpbmciLCJzaG91bGRDbG9zZU9uQ2xpY2siLCJzaG91bGRDbG9zZU9uRXNjYXBlUHJlc3MiLCJvbkJlZm9yZUNsb3NlIiwib25FeGl0Iiwib25FeGl0aW5nIiwib25FeGl0ZWQiLCJvbkVudGVyIiwib25FbnRlcmluZyIsIm9uRW50ZXJlZCIsImlzU2hvd24iLCJwcm9wcyIsInRoZW1lIiwiY29sb3JzIiwicHJldmlvdXNBY3RpdmVFbGVtZW50Iiwic2V0UHJldmlvdXNBY3RpdmVFbGVtZW50Iiwic3RhdHVzIiwic2V0U3RhdHVzIiwiY29udGFpbmVyUmVmIiwiY2xvc2UiLCJzaG91bGRDbG9zZSIsIm9uRXNjIiwiZXZlbnQiLCJrZXkiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJicmluZ0ZvY3VzSW5zaWRlT3ZlcmxheSIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJyaW5nRm9jdXNCYWNrVG9UYXJnZXQiLCJoYW5kbGVCb2R5U2Nyb2xsIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3VycmVudCIsImlzRm9jdXNPdXRzaWRlTW9kYWwiLCJjb250YWlucyIsImF1dG9mb2N1c0VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid3JhcHBlckVsZW1lbnQiLCJidXR0b25FbGVtZW50IiwiZm9jdXMiLCJpc0ZvY3VzSW5zaWRlTW9kYWwiLCJwcmV2ZW50U2Nyb2xsIiwiaGFuZGxlRW50ZXIiLCJub2RlIiwiaXNBcHBlYXJpbmciLCJoYW5kbGVFbnRlcmluZyIsImhhbmRsZUVudGVyZWQiLCJoYW5kbGVFeGl0IiwiaGFuZGxlRXhpdGluZyIsImhhbmRsZUV4aXRlZCIsImhhbmRsZUJhY2tkcm9wQ2xpY2siLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiU3RhY2tpbmdPcmRlciIsIk9WRVJMQVkiLCJ6SW5kZXgiLCJzdGF0ZSIsImNsYXNzTmFtZSIsIm92ZXJsYXkiLCJ0b1N0cmluZyIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9uZU9mVHlwZSIsImZ1bmMiLCJpc1JlcXVpcmVkIiwiYm9vbCIsIm9iamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxJQUFNQSxJQUFJLEdBQUcsU0FBUEEsSUFBTyxHQUFNLENBQUUsQ0FBckI7O0FBQ0EsSUFBTUMsVUFBVSxHQUFHLEVBQW5CO0FBRUEsSUFBTUMsZUFBZSxHQUFHO0FBQ3RCQyxFQUFBQSxRQUFRLEVBQUUsZ0NBRFk7QUFFdEJDLEVBQUFBLFlBQVksRUFBRSxnQ0FGUTtBQUd0QkMsRUFBQUEsWUFBWSxFQUFFLDhCQUhRO0FBSXRCQyxFQUFBQSxLQUFLLEVBQUUsZ0NBSmU7QUFLdEJDLEVBQUFBLE1BQU0sRUFBRTtBQUxjLENBQXhCO0FBUUEsSUFBTUMsa0JBQWtCLEdBQUcsR0FBM0I7O0FBRUEsSUFBTUMsZUFBZSxHQUFHQyxZQUFJQyxTQUFKLENBQWMsaUJBQWQsRUFBaUM7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O0FBQ0V2RCxFQUFBQSxPQUFPLEVBQUVvRCxzQkFBVUksSUFWRDs7QUFZbEI7QUFDRjtBQUNBO0FBQ0VuRSxFQUFBQSxjQUFjLEVBQUUrRCxzQkFBVUssTUFmUjs7QUFpQmxCO0FBQ0Y7QUFDQTtBQUNFbkUsRUFBQUEsb0JBQW9CLEVBQUU4RCxzQkFBVUksSUFwQmQ7O0FBc0JsQjtBQUNGO0FBQ0E7QUFDRWpFLEVBQUFBLGtCQUFrQixFQUFFNkQsc0JBQVVJLElBekJaOztBQTJCbEI7QUFDRjtBQUNBO0FBQ0VoRSxFQUFBQSx3QkFBd0IsRUFBRTRELHNCQUFVSSxJQTlCbEI7O0FBZ0NsQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0UvRCxFQUFBQSxhQUFhLEVBQUUyRCxzQkFBVUUsSUFyQ1A7O0FBdUNsQjtBQUNGO0FBQ0E7QUFDQTtBQUNFNUQsRUFBQUEsTUFBTSxFQUFFMEQsc0JBQVVFLElBM0NBOztBQTZDbEI7QUFDRjtBQUNBO0FBQ0E7QUFDRTNELEVBQUFBLFNBQVMsRUFBRXlELHNCQUFVRSxJQWpESDs7QUFtRGxCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0UxRCxFQUFBQSxRQUFRLEVBQUV3RCxzQkFBVUUsSUF2REY7O0FBeURsQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNFekQsRUFBQUEsT0FBTyxFQUFFdUQsc0JBQVVFLElBaEVEOztBQWtFbEI7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRXhELEVBQUFBLFVBQVUsRUFBRXNELHNCQUFVRSxJQXpFSjs7QUEyRWxCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0V2RCxFQUFBQSxTQUFTLEVBQUVxRCxzQkFBVUU7QUFsRkgsQ0FBcEI7ZUFxRmVuRSxPIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IG1lbW8sIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdnbGFtb3InXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnXG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAncmVhY3QtdHJhbnNpdGlvbi1ncm91cCdcbmltcG9ydCBCb3ggZnJvbSAndWktYm94J1xuaW1wb3J0IHsgU3RhY2tpbmdPcmRlciB9IGZyb20gJy4uLy4uL2NvbnN0YW50cydcbmltcG9ydCBwcmV2ZW50Qm9keVNjcm9sbCBmcm9tICcuLi8uLi9saWIvcHJldmVudC1ib2R5LXNjcm9sbCdcbmltcG9ydCBzYWZlSW52b2tlIGZyb20gJy4uLy4uL2xpYi9zYWZlLWludm9rZSdcbmltcG9ydCB7IFBvcnRhbCB9IGZyb20gJy4uLy4uL3BvcnRhbCdcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnLi4vLi4vc3RhY2snXG5pbXBvcnQgeyB1c2VUaGVtZSB9IGZyb20gJy4uLy4uL3RoZW1lJ1xuXG5jb25zdCBub29wID0gKCkgPT4ge31cbmNvbnN0IGVtcHR5UHJvcHMgPSB7fVxuXG5jb25zdCBhbmltYXRpb25FYXNpbmcgPSB7XG4gIHN0YW5kYXJkOiAnY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpJyxcbiAgZGVjZWxlcmF0aW9uOiAnY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpJyxcbiAgYWNjZWxlcmF0aW9uOiAnY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKScsXG4gIHNoYXJwOiAnY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjYsIDEpJyxcbiAgc3ByaW5nOiAnY3ViaWMtYmV6aWVyKDAuMTc1LCAwLjg4NSwgMC4zMjAsIDEuMTc1KSdcbn1cblxuY29uc3QgQU5JTUFUSU9OX0RVUkFUSU9OID0gMjQwXG5cbmNvbnN0IGZhZGVJbkFuaW1hdGlvbiA9IGNzcy5rZXlmcmFtZXMoJ2ZhZGVJbkFuaW1hdGlvbicsIHtcbiAgZnJvbToge1xuICAgIG9wYWNpdHk6IDBcbiAgfSxcbiAgdG86IHtcbiAgICBvcGFjaXR5OiAxXG4gIH1cbn0pXG5cbmNvbnN0IGZhZGVPdXRBbmltYXRpb24gPSBjc3Mua2V5ZnJhbWVzKCdmYWRlT3V0QW5pbWF0aW9uJywge1xuICBmcm9tOiB7XG4gICAgb3BhY2l0eTogMVxuICB9LFxuICB0bzoge1xuICAgIG9wYWNpdHk6IDBcbiAgfVxufSlcblxuY29uc3QgYW5pbWF0aW9uU3R5bGVzID0gYmFja2dyb3VuZENvbG9yID0+ICh7XG4gICcmOjpiZWZvcmUnOiB7XG4gICAgYmFja2dyb3VuZENvbG9yLFxuICAgIGxlZnQ6IDAsXG4gICAgdG9wOiAwLFxuICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICBjb250ZW50OiAnXCIgXCInXG4gIH0sXG4gICcmW2RhdGEtc3RhdGU9XCJlbnRlcmluZ1wiXTo6YmVmb3JlLCAmW2RhdGEtc3RhdGU9XCJlbnRlcmVkXCJdOjpiZWZvcmUnOiB7XG4gICAgYW5pbWF0aW9uOiBgJHtmYWRlSW5BbmltYXRpb259ICR7QU5JTUFUSU9OX0RVUkFUSU9OfW1zICR7YW5pbWF0aW9uRWFzaW5nLmRlY2VsZXJhdGlvbn0gYm90aGBcbiAgfSxcbiAgJyZbZGF0YS1zdGF0ZT1cImV4aXRpbmdcIl06OmJlZm9yZSwgJltkYXRhLXN0YXRlPVwiZXhpdGVkXCJdOjpiZWZvcmUnOiB7XG4gICAgYW5pbWF0aW9uOiBgJHtmYWRlT3V0QW5pbWF0aW9ufSAke0FOSU1BVElPTl9EVVJBVElPTn1tcyAke2FuaW1hdGlvbkVhc2luZy5hY2NlbGVyYXRpb259IGJvdGhgXG4gIH1cbn0pXG5cbi8qKlxuICogT3ZlcmxheSBpcyBlc3NlbnRpYWxseSBhIHdyYXBwZXIgYXJvdW5kIHJlYWN0LXRyYW5zaXRpb24tZ3JvdXAvVHJhbnNpdGlvblxuICovXG5jb25zdCBPdmVybGF5ID0gbWVtbyhmdW5jdGlvbiBPdmVybGF5KHtcbiAgY2hpbGRyZW4sXG4gIGNvbnRhaW5lclByb3BzID0gZW1wdHlQcm9wcyxcbiAgcHJldmVudEJvZHlTY3JvbGxpbmcgPSBmYWxzZSxcbiAgc2hvdWxkQ2xvc2VPbkNsaWNrID0gdHJ1ZSxcbiAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzID0gdHJ1ZSxcbiAgb25CZWZvcmVDbG9zZSxcbiAgb25FeGl0ID0gbm9vcCxcbiAgb25FeGl0aW5nID0gbm9vcCxcbiAgb25FeGl0ZWQgPSBub29wLFxuICBvbkVudGVyID0gbm9vcCxcbiAgb25FbnRlcmluZyA9IG5vb3AsXG4gIG9uRW50ZXJlZCA9IG5vb3AsXG4gIGlzU2hvd24sXG4gIC4uLnByb3BzXG59KSB7XG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKVxuICBjb25zdCB7IGNvbG9ycyB9ID0gdGhlbWVcbiAgY29uc3QgW3ByZXZpb3VzQWN0aXZlRWxlbWVudCwgc2V0UHJldmlvdXNBY3RpdmVFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZShpc1Nob3duID8gJ2VudGVyaW5nJyA6ICdleGl0ZWQnKVxuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYobnVsbClcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc1Nob3duKSB7XG4gICAgICBzZXRTdGF0dXMoJ2VudGVyaW5nJylcbiAgICB9XG4gIH0sIFtpc1Nob3duXSlcblxuICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICBjb25zdCBzaG91bGRDbG9zZSA9IHNhZmVJbnZva2Uob25CZWZvcmVDbG9zZSlcbiAgICBpZiAoc2hvdWxkQ2xvc2UgIT09IGZhbHNlKSB7XG4gICAgICBzZXRTdGF0dXMoJ2V4aXRpbmcnKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG9uRXNjID0gZXZlbnQgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnICYmIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzcykge1xuICAgICAgY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gJ2VudGVyZWQnKSB7XG4gICAgICBzZXRQcmV2aW91c0FjdGl2ZUVsZW1lbnQoZG9jdW1lbnQuYWN0aXZlRWxlbWVudClcbiAgICAgIGJyaW5nRm9jdXNJbnNpZGVPdmVybGF5KClcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSAnZW50ZXJpbmcnKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbkVzYywgZmFsc2UpXG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gJ2V4aXRpbmcnKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbkVzYywgZmFsc2UpXG4gICAgICBicmluZ0ZvY3VzQmFja1RvVGFyZ2V0KClcbiAgICB9XG4gICAgLy8gVGhlc2UgbWlzc2luZyBkZXBzICpzaG91bGQqIGJlIG9rYXkgKGFkZGluZyB0aGVtIHdvdWxkIHJlcXVpcmUgb3RoZXIgY2hhbmdlcylcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtzdGF0dXNdKVxuXG4gIC8vIENvbXBvbmVudFdpbGxVbm1vdW50XG4gIHVzZUVmZmVjdChcbiAgICAoKSA9PiAoKSA9PiB7XG4gICAgICBoYW5kbGVCb2R5U2Nyb2xsKGZhbHNlKVxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25Fc2MsIGZhbHNlKVxuICAgIH0sXG4gICAgLy8gVGhlc2UgbWlzc2luZyBkZXBzICpzaG91bGQqIGJlIG9rYXkgKGFkZGluZyB0aGVtIHdvdWxkIHJlcXVpcmUgb3RoZXIgY2hhbmdlcylcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgW11cbiAgKVxuXG4gIC8qKlxuICAgKiBNZXRob2RzIGJvcnJvd2VkIGZyb20gQmx1ZXByaW50SlNcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL3BhbGFudGlyL2JsdWVwcmludC9ibG9iL3JlbGVhc2UvMi4wLjAvcGFja2FnZXMvY29yZS9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXkudHN4XG4gICAqL1xuICBjb25zdCBicmluZ0ZvY3VzSW5zaWRlT3ZlcmxheSA9ICgpID0+IHtcbiAgICAvLyBBbHdheXMgZGVsYXkgZm9jdXMgbWFuaXB1bGF0aW9uIHRvIGp1c3QgYmVmb3JlIHJlcGFpbnQgdG8gcHJldmVudCBzY3JvbGwganVtcGluZ1xuICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgLy8gQ29udGFpbmVyIHJlZiBtYXkgYmUgdW5kZWZpbmVkIGJldHdlZW4gY29tcG9uZW50IG1vdW50aW5nIGFuZCBQb3J0YWwgcmVuZGVyaW5nXG4gICAgICAvLyBhY3RpdmVFbGVtZW50IG1heSBiZSB1bmRlZmluZWQgaW4gc29tZSByYXJlIGNhc2VzIGluIElFXG5cbiAgICAgIGlmIChcbiAgICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQgPT0gbnVsbCB8fCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcSwgbm8tZXEtbnVsbFxuICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IG51bGwgfHwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXEsIG5vLWVxLW51bGxcbiAgICAgICAgIWlzU2hvd25cbiAgICAgICkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNGb2N1c091dHNpZGVNb2RhbCA9ICFjb250YWluZXJSZWYuY3VycmVudC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KVxuICAgICAgaWYgKGlzRm9jdXNPdXRzaWRlTW9kYWwpIHtcbiAgICAgICAgLy8gRWxlbWVudCBtYXJrZWQgYXV0b2ZvY3VzIGhhcyBoaWdoZXIgcHJpb3JpdHkgdGhhbiB0aGUgb3RoZXIgY2xvd25zXG4gICAgICAgIGNvbnN0IGF1dG9mb2N1c0VsZW1lbnQgPSBjb250YWluZXJSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKCdbYXV0b2ZvY3VzXScpXG4gICAgICAgIGNvbnN0IHdyYXBwZXJFbGVtZW50ID0gY29udGFpbmVyUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcignW3RhYmluZGV4XScpXG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBjb250YWluZXJSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuXG4gICAgICAgIGlmIChhdXRvZm9jdXNFbGVtZW50KSB7XG4gICAgICAgICAgYXV0b2ZvY3VzRWxlbWVudC5mb2N1cygpXG4gICAgICAgIH0gZWxzZSBpZiAod3JhcHBlckVsZW1lbnQpIHtcbiAgICAgICAgICB3cmFwcGVyRWxlbWVudC5mb2N1cygpXG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uRWxlbWVudCkge1xuICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuZm9jdXMoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGJyaW5nRm9jdXNCYWNrVG9UYXJnZXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHByZXZpb3VzQWN0aXZlRWxlbWVudCA9PSBudWxsIHx8IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxLCBuby1lcS1udWxsXG4gICAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50ID09IG51bGwgfHwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXEsIG5vLWVxLW51bGxcbiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PSBudWxsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxLCBuby1lcS1udWxsXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIEJyaW5nIGJhY2sgZm9jdXMgb24gdGhlIHRhcmdldC5cbiAgICAgIGNvbnN0IGlzRm9jdXNJbnNpZGVNb2RhbCA9IGNvbnRhaW5lclJlZi5jdXJyZW50LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpXG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSB8fCBpc0ZvY3VzSW5zaWRlTW9kYWwpIHtcbiAgICAgICAgcHJldmlvdXNBY3RpdmVFbGVtZW50LmZvY3VzKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQm9keVNjcm9sbCA9IHByZXZlbnRTY3JvbGwgPT4ge1xuICAgIGlmIChwcmV2ZW50Qm9keVNjcm9sbGluZykge1xuICAgICAgcHJldmVudEJvZHlTY3JvbGwocHJldmVudFNjcm9sbClcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVFbnRlciA9IChub2RlLCBpc0FwcGVhcmluZykgPT4ge1xuICAgIGhhbmRsZUJvZHlTY3JvbGwodHJ1ZSlcbiAgICBzYWZlSW52b2tlKG9uRW50ZXIsIG5vZGUsIGlzQXBwZWFyaW5nKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRW50ZXJpbmcgPSAobm9kZSwgaXNBcHBlYXJpbmcpID0+IHtcbiAgICBzZXRTdGF0dXMoJ2VudGVyaW5nJylcbiAgICBzYWZlSW52b2tlKG9uRW50ZXJpbmcsIG5vZGUsIGlzQXBwZWFyaW5nKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRW50ZXJlZCA9IChub2RlLCBpc0FwcGVhcmluZykgPT4ge1xuICAgIHNldFN0YXR1cygnZW50ZXJlZCcpXG4gICAgc2FmZUludm9rZShvbkVudGVyZWQsIG5vZGUsIGlzQXBwZWFyaW5nKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRXhpdCA9IG5vZGUgPT4ge1xuICAgIGhhbmRsZUJvZHlTY3JvbGwoZmFsc2UpXG4gICAgc2FmZUludm9rZShvbkV4aXQsIG5vZGUpXG4gIH1cblxuICBjb25zdCBoYW5kbGVFeGl0aW5nID0gbm9kZSA9PiB7XG4gICAgc2V0U3RhdHVzKCdleGl0aW5nJylcbiAgICBzYWZlSW52b2tlKG9uRXhpdGluZywgbm9kZSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUV4aXRlZCA9IG5vZGUgPT4ge1xuICAgIHNldFN0YXR1cygnZXhpdGVkJylcbiAgICBzYWZlSW52b2tlKG9uRXhpdGVkLCBub2RlKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQmFja2Ryb3BDbGljayA9IGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0IHx8ICFzaG91bGRDbG9zZU9uQ2xpY2spIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNsb3NlKClcbiAgfVxuXG4gIGlmIChzdGF0dXMgPT09ICdleGl0ZWQnKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFN0YWNrIHZhbHVlPXtTdGFja2luZ09yZGVyLk9WRVJMQVl9PlxuICAgICAge3pJbmRleCA9PiAoXG4gICAgICAgIDxQb3J0YWw+XG4gICAgICAgICAgPFRyYW5zaXRpb25cbiAgICAgICAgICAgIG5vZGVSZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgICAgICAgIGFwcGVhclxuICAgICAgICAgICAgdW5tb3VudE9uRXhpdFxuICAgICAgICAgICAgdGltZW91dD17QU5JTUFUSU9OX0RVUkFUSU9OfVxuICAgICAgICAgICAgaW49e2lzU2hvd24gJiYgc3RhdHVzICE9PSAnZXhpdGluZyd9XG4gICAgICAgICAgICBvbkV4aXQ9e2hhbmRsZUV4aXR9XG4gICAgICAgICAgICBvbkV4aXRpbmc9e2hhbmRsZUV4aXRpbmd9XG4gICAgICAgICAgICBvbkV4aXRlZD17aGFuZGxlRXhpdGVkfVxuICAgICAgICAgICAgb25FbnRlcj17aGFuZGxlRW50ZXJ9XG4gICAgICAgICAgICBvbkVudGVyaW5nPXtoYW5kbGVFbnRlcmluZ31cbiAgICAgICAgICAgIG9uRW50ZXJlZD17aGFuZGxlRW50ZXJlZH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c3RhdGUgPT4gKFxuICAgICAgICAgICAgICA8Qm94XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQmFja2Ryb3BDbGlja31cbiAgICAgICAgICAgICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgICAgICAgICAgICBwb3NpdGlvbj1cImZpeGVkXCJcbiAgICAgICAgICAgICAgICB0b3A9ezB9XG4gICAgICAgICAgICAgICAgbGVmdD17MH1cbiAgICAgICAgICAgICAgICByaWdodD17MH1cbiAgICAgICAgICAgICAgICBib3R0b209ezB9XG4gICAgICAgICAgICAgICAgekluZGV4PXt6SW5kZXh9XG4gICAgICAgICAgICAgICAgZGF0YS1zdGF0ZT17c3RhdGV9XG4gICAgICAgICAgICAgICAgey4uLmNvbnRhaW5lclByb3BzfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3goY29udGFpbmVyUHJvcHMuY2xhc3NOYW1lLCBjc3MoYW5pbWF0aW9uU3R5bGVzKGNvbG9ycy5vdmVybGF5KSkudG9TdHJpbmcoKSl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7dHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4oeyBzdGF0ZSwgY2xvc2UgfSkgOiBjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvVHJhbnNpdGlvbj5cbiAgICAgICAgPC9Qb3J0YWw+XG4gICAgICApfVxuICAgIDwvU3RhY2s+XG4gIClcbn0pXG5cbk92ZXJsYXkucHJvcFR5cGVzID0ge1xuICAvKipcbiAgICogQ2hpbGRyZW4gY2FuIGJlIGEgbm9kZSBvciBhIGZ1bmN0aW9uIGFjY2VwdGluZyBgY2xvc2U6IGZ1bmNgXG4gICAqIGFuZCBgc3RhdGU6IEVOVEVSSU5HIHwgRU5URVJFRCB8IEVYSVRJTkcgfCBFWElURURgLlxuICAgKi9cbiAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ub2RlLCBQcm9wVHlwZXMuZnVuY10pLmlzUmVxdWlyZWQsXG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGNvbXBvbmVudDsgdHJpZ2dlcnMgdGhlIGVudGVyIG9yIGV4aXQgc3RhdGVzLlxuICAgKi9cbiAgaXNTaG93bjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIFByb3BzIHRvIGJlIHBhc3NlZCB0aHJvdWdoIG9uIHRoZSBpbm5lciBCb3guXG4gICAqL1xuICBjb250YWluZXJQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdG8gcHJldmVudCBib2R5IHNjcm9sbGluZyBvdXRzaWRlIHRoZSBjb250ZXh0IG9mIHRoZSBvdmVybGF5XG4gICAqL1xuICBwcmV2ZW50Qm9keVNjcm9sbGluZzogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyBpZiBjbGlja2luZyB0aGUgb3ZlcmxheSBzaG91bGQgY2xvc2UgdGhlIG92ZXJsYXkuXG4gICAqL1xuICBzaG91bGRDbG9zZU9uQ2xpY2s6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgaWYgcHJlc3NpbmcgdGhlIGVzYyBrZXkgc2hvdWxkIGNsb3NlIHRoZSBvdmVybGF5LlxuICAgKi9cbiAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICogRnVuY3Rpb24gY2FsbGVkIHdoZW4gb3ZlcmxheSBpcyBhYm91dCB0byBjbG9zZS5cbiAgICogUmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGUgc2hlZXQgZnJvbSBjbG9zaW5nLlxuICAgKiB0eXBlOiBgRnVuY3Rpb24gLT4gQm9vbGVhbmBcbiAgICovXG4gIG9uQmVmb3JlQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmaXJlZCBiZWZvcmUgdGhlIFwiZXhpdGluZ1wiIHN0YXR1cyBpcyBhcHBsaWVkLlxuICAgKiB0eXBlOiBgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpIC0+IHZvaWRgXG4gICAqL1xuICBvbkV4aXQ6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmaXJlZCBhZnRlciB0aGUgXCJleGl0aW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuXG4gICAqIHR5cGU6IGBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudCkgLT4gdm9pZGBcbiAgICovXG4gIG9uRXhpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImV4aXRlZFwiIHN0YXR1cyBpcyBhcHBsaWVkLlxuICAgKiB0eXBlOiBgRnVuY3Rpb24oZXhpdFN0YXRlOiBBbnk/LCBub2RlOiBIdG1sRWxlbWVudCkgLT4gdm9pZGBcbiAgICovXG4gIG9uRXhpdGVkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYmVmb3JlIHRoZSBcImVudGVyaW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuXG4gICAqIEFuIGV4dHJhIHBhcmFtZXRlciBpc0FwcGVhcmluZyBpcyBzdXBwbGllZCB0byBpbmRpY2F0ZSBpZiB0aGUgZW50ZXIgc3RhZ2VcbiAgICogaXMgb2NjdXJyaW5nIG9uIHRoZSBpbml0aWFsIG1vdW50LlxuICAgKlxuICAgKiB0eXBlOiBgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQsIGlzQXBwZWFyaW5nOiBib29sKSAtPiB2b2lkYFxuICAgKi9cbiAgb25FbnRlcjogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImVudGVyaW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuXG4gICAqIEFuIGV4dHJhIHBhcmFtZXRlciBpc0FwcGVhcmluZyBpcyBzdXBwbGllZCB0byBpbmRpY2F0ZSBpZiB0aGUgZW50ZXIgc3RhZ2VcbiAgICogaXMgb2NjdXJyaW5nIG9uIHRoZSBpbml0aWFsIG1vdW50LlxuICAgKlxuICAgKiB0eXBlOiBgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQsIGlzQXBwZWFyaW5nOiBib29sKSAtPiB2b2lkYFxuICAgKi9cbiAgb25FbnRlcmluZzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImVudGVyZWRcIiBzdGF0dXMgaXMgYXBwbGllZC5cbiAgICogQW4gZXh0cmEgcGFyYW1ldGVyIGlzQXBwZWFyaW5nIGlzIHN1cHBsaWVkIHRvIGluZGljYXRlIGlmIHRoZSBlbnRlciBzdGFnZVxuICAgKiBpcyBvY2N1cnJpbmcgb24gdGhlIGluaXRpYWwgbW91bnQuXG4gICAqXG4gICAqIHR5cGU6IGBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudCwgaXNBcHBlYXJpbmc6IGJvb2wpIC0+IHZvaWRgXG4gICAqL1xuICBvbkVudGVyZWQ6IFByb3BUeXBlcy5mdW5jXG59XG5cbmV4cG9ydCBkZWZhdWx0IE92ZXJsYXlcbiJdfQ==
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hydrate = hydrate;
exports["default"] = autoHydrate;

var _glamor = require("glamor");

var _uiBox = require("ui-box");

var _canUseDom = _interopRequireDefault(require("../../lib/canUseDom"));

/**
 * You shouldn't have to manually run this.
 * This is mainly an export for testing purposes.
 */
function hydrate(hydration) {
  if (hydration.uiBoxCache) {
    (0, _uiBox.hydrate)(hydration.uiBoxCache);
  }

  if (hydration.glamorIds) {
    (0, _glamor.rehydrate)(hydration.glamorIds);
  }
}

function autoHydrate() {
  if (_canUseDom["default"]) {
    var hydration = document.querySelector('#evergreen-hydrate');

    if (hydration) {
      try {
        var hydrationObject = JSON.parse(hydration.innerHTML);
        hydrate(hydrationObject);
      } catch (error) {
        console.error('Evergreen automatic hydration object is invalid JSON', error);
      }
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zc3Ivc3JjL2F1dG9IeWRyYXRlLmpzIl0sIm5hbWVzIjpbImh5ZHJhdGUiLCJoeWRyYXRpb24iLCJ1aUJveENhY2hlIiwiZ2xhbW9ySWRzIiwiYXV0b0h5ZHJhdGUiLCJjYW5Vc2VEb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJoeWRyYXRpb25PYmplY3QiLCJKU09OIiwicGFyc2UiLCJpbm5lckhUTUwiLCJlcnJvciIsImNvbnNvbGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNBLE9BQVQsQ0FBaUJDLFNBQWpCLEVBQTRCO0FBQ2pDLE1BQUlBLFNBQVMsQ0FBQ0MsVUFBZCxFQUEwQjtBQUN4Qix3QkFBV0QsU0FBUyxDQUFDQyxVQUFyQjtBQUNEOztBQUVELE1BQUlELFNBQVMsQ0FBQ0UsU0FBZCxFQUF5QjtBQUN2QiwyQkFBVUYsU0FBUyxDQUFDRSxTQUFwQjtBQUNEO0FBQ0Y7O0FBRWMsU0FBU0MsV0FBVCxHQUF1QjtBQUNwQyxNQUFJQyxxQkFBSixFQUFlO0FBQ2IsUUFBTUosU0FBUyxHQUFHSyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsb0JBQXZCLENBQWxCOztBQUVBLFFBQUlOLFNBQUosRUFBZTtBQUNiLFVBQUk7QUFDRixZQUFNTyxlQUFlLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXVCxTQUFTLENBQUNVLFNBQXJCLENBQXhCO0FBQ0FYLFFBQUFBLE9BQU8sQ0FBQ1EsZUFBRCxDQUFQO0FBQ0QsT0FIRCxDQUdFLE9BQU9JLEtBQVAsRUFBYztBQUNkQyxRQUFBQSxPQUFPLENBQUNELEtBQVIsQ0FBYyxzREFBZCxFQUFzRUEsS0FBdEU7QUFDRDtBQUNGO0FBQ0Y7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlaHlkcmF0ZSB9IGZyb20gJ2dsYW1vcidcbmltcG9ydCB7IGh5ZHJhdGUgYXMgYm94SHlkcmF0ZSB9IGZyb20gJ3VpLWJveCdcbmltcG9ydCBjYW5Vc2VEb20gZnJvbSAnLi4vLi4vbGliL2NhblVzZURvbSdcblxuLyoqXG4gKiBZb3Ugc2hvdWxkbid0IGhhdmUgdG8gbWFudWFsbHkgcnVuIHRoaXMuXG4gKiBUaGlzIGlzIG1haW5seSBhbiBleHBvcnQgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoeWRyYXRlKGh5ZHJhdGlvbikge1xuICBpZiAoaHlkcmF0aW9uLnVpQm94Q2FjaGUpIHtcbiAgICBib3hIeWRyYXRlKGh5ZHJhdGlvbi51aUJveENhY2hlKVxuICB9XG5cbiAgaWYgKGh5ZHJhdGlvbi5nbGFtb3JJZHMpIHtcbiAgICByZWh5ZHJhdGUoaHlkcmF0aW9uLmdsYW1vcklkcylcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhdXRvSHlkcmF0ZSgpIHtcbiAgaWYgKGNhblVzZURvbSkge1xuICAgIGNvbnN0IGh5ZHJhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNldmVyZ3JlZW4taHlkcmF0ZScpXG5cbiAgICBpZiAoaHlkcmF0aW9uKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBoeWRyYXRpb25PYmplY3QgPSBKU09OLnBhcnNlKGh5ZHJhdGlvbi5pbm5lckhUTUwpXG4gICAgICAgIGh5ZHJhdGUoaHlkcmF0aW9uT2JqZWN0KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXZlcmdyZWVuIGF1dG9tYXRpYyBoeWRyYXRpb24gb2JqZWN0IGlzIGludmFsaWQgSlNPTicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19
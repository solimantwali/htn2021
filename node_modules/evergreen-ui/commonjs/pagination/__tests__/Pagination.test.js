"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _ = require("../");

var _BasePaginationFixture = _interopRequireDefault(require("../fixtures/BasePaginationFixture"));

describe('Pagination', function () {
  it('Shows the number of items if its not overflowing', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
    var _render, findByRole, container;

    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_.Pagination, {
              page: 1,
              totalPages: 5
            })), findByRole = _render.findByRole;
            _context.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context.sent;
            expect(container.querySelectorAll('li')).toHaveLength(7);
            expect(container.querySelectorAll('button[aria-label~="Page"]')).toHaveLength(5);
            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('1');

          case 7:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  })));
  it('Shows a maximum # of items if it is overflowing', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
    var _render2, findByRole, container;

    return _regenerator["default"].wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_.Pagination, {
              page: 1,
              totalPages: 10
            })), findByRole = _render2.findByRole;
            _context2.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context2.sent;
            // Two handles + a max of 7 list items
            expect(container.querySelectorAll('li')).toHaveLength(9);

          case 5:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  })));
  it('Shows ellipses if the component is overflowing and page < 4', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3() {
    var _render3, findByRole, container;

    return _regenerator["default"].wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _render3 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_.Pagination, {
              page: 1,
              totalPages: 10
            })), findByRole = _render3.findByRole;
            _context3.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context3.sent;
            expect(container.getElementsByTagName('span')).toHaveLength(1);
            expect(container.getElementsByTagName('span')[0].textContent).toEqual('...');

          case 6:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3);
  })));
  it('Shows two ellipses if the component is overflowing and page > 4 and page < totalPages - 4', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4() {
    var _render4, findByRole, container;

    return _regenerator["default"].wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            _render4 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_.Pagination, {
              page: 5,
              totalPages: 10
            })), findByRole = _render4.findByRole;
            _context4.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context4.sent;
            expect(container.getElementsByTagName('span')).toHaveLength(2);

          case 5:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee4);
  })));
  it('Shows one ellipsis if the totalPages - page < 4', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5() {
    var _render5, findByRole, container;

    return _regenerator["default"].wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _render5 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_.Pagination, {
              page: 7,
              totalPages: 10
            })), findByRole = _render5.findByRole;
            _context5.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context5.sent;
            expect(container.getElementsByTagName('span')).toHaveLength(1);

          case 5:
          case "end":
            return _context5.stop();
        }
      }
    }, _callee5);
  })));
  it('Only renders handles if there are an unknown # of pages', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee6() {
    var _render6, findByRole, container;

    return _regenerator["default"].wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            _render6 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_.Pagination, {
              page: 5
            })), findByRole = _render6.findByRole;
            _context6.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context6.sent;
            expect(container.querySelectorAll('li')).toHaveLength(2);

          case 5:
          case "end":
            return _context6.stop();
        }
      }
    }, _callee6);
  })));
  it('Clicking on the handles advances and rewinds the current page', /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee7() {
    var _render7, findByRole, container, paginationItems, previousHandle, nextHandle;

    return _regenerator["default"].wrap(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            _render7 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_BasePaginationFixture["default"], null)), findByRole = _render7.findByRole;
            _context7.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context7.sent;
            paginationItems = container.querySelectorAll('li');
            previousHandle = paginationItems[0].querySelector('button');
            nextHandle = paginationItems[paginationItems.length - 1].querySelector('button');
            expect(previousHandle).toHaveAttribute('disabled');
            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('1');

            _react2.fireEvent.click(nextHandle);

            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('2');
            expect(previousHandle).not.toHaveAttribute('disabled');

            _react2.fireEvent.click(previousHandle);

            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('1');

          case 14:
          case "end":
            return _context7.stop();
        }
      }
    }, _callee7);
  })));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wYWdpbmF0aW9uL19fdGVzdHNfXy9QYWdpbmF0aW9uLnRlc3QuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJpdCIsImZpbmRCeVJvbGUiLCJjb250YWluZXIiLCJleHBlY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9IYXZlTGVuZ3RoIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwidG9FcXVhbCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFnaW5hdGlvbkl0ZW1zIiwicHJldmlvdXNIYW5kbGUiLCJuZXh0SGFuZGxlIiwibGVuZ3RoIiwidG9IYXZlQXR0cmlidXRlIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJub3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUFBLFFBQVEsQ0FBQyxZQUFELEVBQWUsWUFBTTtBQUMzQkMsRUFBQUEsRUFBRSxDQUFDLGtEQUFELDZGQUFxRDtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQzlCLGtDQUFPLGdDQUFDLFlBQUQ7QUFBWSxjQUFBLElBQUksRUFBRSxDQUFsQjtBQUFxQixjQUFBLFVBQVUsRUFBRTtBQUFqQyxjQUFQLENBRDhCLEVBQzdDQyxVQUQ2QyxXQUM3Q0EsVUFENkM7QUFBQTtBQUFBLG1CQUU3QkEsVUFBVSxDQUFDLFlBQUQsQ0FGbUI7O0FBQUE7QUFFL0NDLFlBQUFBLFNBRitDO0FBR3JEQyxZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ0UsZ0JBQVYsQ0FBMkIsSUFBM0IsQ0FBRCxDQUFOLENBQXlDQyxZQUF6QyxDQUFzRCxDQUF0RDtBQUNBRixZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ0UsZ0JBQVYsQ0FBMkIsNEJBQTNCLENBQUQsQ0FBTixDQUFpRUMsWUFBakUsQ0FBOEUsQ0FBOUU7QUFDQUYsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNJLGFBQVYsQ0FBd0IsNEJBQXhCLEVBQXNEQyxXQUF2RCxDQUFOLENBQTBFQyxPQUExRSxDQUFrRixHQUFsRjs7QUFMcUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FBckQsR0FBRjtBQVFBUixFQUFBQSxFQUFFLENBQUMsaURBQUQsNkZBQW9EO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFDN0Isa0NBQU8sZ0NBQUMsWUFBRDtBQUFZLGNBQUEsSUFBSSxFQUFFLENBQWxCO0FBQXFCLGNBQUEsVUFBVSxFQUFFO0FBQWpDLGNBQVAsQ0FENkIsRUFDNUNDLFVBRDRDLFlBQzVDQSxVQUQ0QztBQUFBO0FBQUEsbUJBRTVCQSxVQUFVLENBQUMsWUFBRCxDQUZrQjs7QUFBQTtBQUU5Q0MsWUFBQUEsU0FGOEM7QUFHcEQ7QUFDQUMsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNFLGdCQUFWLENBQTJCLElBQTNCLENBQUQsQ0FBTixDQUF5Q0MsWUFBekMsQ0FBc0QsQ0FBdEQ7O0FBSm9EO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBQXBELEdBQUY7QUFPQUwsRUFBQUEsRUFBRSxDQUFDLDZEQUFELDZGQUFnRTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQ3pDLGtDQUFPLGdDQUFDLFlBQUQ7QUFBWSxjQUFBLElBQUksRUFBRSxDQUFsQjtBQUFxQixjQUFBLFVBQVUsRUFBRTtBQUFqQyxjQUFQLENBRHlDLEVBQ3hEQyxVQUR3RCxZQUN4REEsVUFEd0Q7QUFBQTtBQUFBLG1CQUV4Q0EsVUFBVSxDQUFDLFlBQUQsQ0FGOEI7O0FBQUE7QUFFMURDLFlBQUFBLFNBRjBEO0FBR2hFQyxZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ08sb0JBQVYsQ0FBK0IsTUFBL0IsQ0FBRCxDQUFOLENBQStDSixZQUEvQyxDQUE0RCxDQUE1RDtBQUNBRixZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ08sb0JBQVYsQ0FBK0IsTUFBL0IsRUFBdUMsQ0FBdkMsRUFBMENGLFdBQTNDLENBQU4sQ0FBOERDLE9BQTlELENBQXNFLEtBQXRFOztBQUpnRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUFoRSxHQUFGO0FBT0FSLEVBQUFBLEVBQUUsQ0FBQywyRkFBRCw2RkFBOEY7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUN2RSxrQ0FBTyxnQ0FBQyxZQUFEO0FBQVksY0FBQSxJQUFJLEVBQUUsQ0FBbEI7QUFBcUIsY0FBQSxVQUFVLEVBQUU7QUFBakMsY0FBUCxDQUR1RSxFQUN0RkMsVUFEc0YsWUFDdEZBLFVBRHNGO0FBQUE7QUFBQSxtQkFFdEVBLFVBQVUsQ0FBQyxZQUFELENBRjREOztBQUFBO0FBRXhGQyxZQUFBQSxTQUZ3RjtBQUc5RkMsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNPLG9CQUFWLENBQStCLE1BQS9CLENBQUQsQ0FBTixDQUErQ0osWUFBL0MsQ0FBNEQsQ0FBNUQ7O0FBSDhGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBQTlGLEdBQUY7QUFNQUwsRUFBQUEsRUFBRSxDQUFDLGlEQUFELDZGQUFvRDtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQzdCLGtDQUFPLGdDQUFDLFlBQUQ7QUFBWSxjQUFBLElBQUksRUFBRSxDQUFsQjtBQUFxQixjQUFBLFVBQVUsRUFBRTtBQUFqQyxjQUFQLENBRDZCLEVBQzVDQyxVQUQ0QyxZQUM1Q0EsVUFENEM7QUFBQTtBQUFBLG1CQUU1QkEsVUFBVSxDQUFDLFlBQUQsQ0FGa0I7O0FBQUE7QUFFOUNDLFlBQUFBLFNBRjhDO0FBR3BEQyxZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ08sb0JBQVYsQ0FBK0IsTUFBL0IsQ0FBRCxDQUFOLENBQStDSixZQUEvQyxDQUE0RCxDQUE1RDs7QUFIb0Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FBcEQsR0FBRjtBQU1BTCxFQUFBQSxFQUFFLENBQUMseURBQUQsNkZBQTREO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFDckMsa0NBQU8sZ0NBQUMsWUFBRDtBQUFZLGNBQUEsSUFBSSxFQUFFO0FBQWxCLGNBQVAsQ0FEcUMsRUFDcERDLFVBRG9ELFlBQ3BEQSxVQURvRDtBQUFBO0FBQUEsbUJBRXBDQSxVQUFVLENBQUMsWUFBRCxDQUYwQjs7QUFBQTtBQUV0REMsWUFBQUEsU0FGc0Q7QUFHNURDLFlBQUFBLE1BQU0sQ0FBQ0QsU0FBUyxDQUFDRSxnQkFBVixDQUEyQixJQUEzQixDQUFELENBQU4sQ0FBeUNDLFlBQXpDLENBQXNELENBQXREOztBQUg0RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUE1RCxHQUFGO0FBTUFMLEVBQUFBLEVBQUUsQ0FBQywrREFBRCw2RkFBa0U7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUMzQyxrQ0FBTyxnQ0FBQyxpQ0FBRCxPQUFQLENBRDJDLEVBQzFEQyxVQUQwRCxZQUMxREEsVUFEMEQ7QUFBQTtBQUFBLG1CQUUxQ0EsVUFBVSxDQUFDLFlBQUQsQ0FGZ0M7O0FBQUE7QUFFNURDLFlBQUFBLFNBRjREO0FBRzVEUSxZQUFBQSxlQUg0RCxHQUcxQ1IsU0FBUyxDQUFDRSxnQkFBVixDQUEyQixJQUEzQixDQUgwQztBQUk1RE8sWUFBQUEsY0FKNEQsR0FJM0NELGVBQWUsQ0FBQyxDQUFELENBQWYsQ0FBbUJKLGFBQW5CLENBQWlDLFFBQWpDLENBSjJDO0FBSzVETSxZQUFBQSxVQUw0RCxHQUsvQ0YsZUFBZSxDQUFDQSxlQUFlLENBQUNHLE1BQWhCLEdBQXlCLENBQTFCLENBQWYsQ0FBNENQLGFBQTVDLENBQTBELFFBQTFELENBTCtDO0FBT2xFSCxZQUFBQSxNQUFNLENBQUNRLGNBQUQsQ0FBTixDQUF1QkcsZUFBdkIsQ0FBdUMsVUFBdkM7QUFDQVgsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNJLGFBQVYsQ0FBd0IsNEJBQXhCLEVBQXNEQyxXQUF2RCxDQUFOLENBQTBFQyxPQUExRSxDQUFrRixHQUFsRjs7QUFFQU8sOEJBQVVDLEtBQVYsQ0FBZ0JKLFVBQWhCOztBQUVBVCxZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ0ksYUFBVixDQUF3Qiw0QkFBeEIsRUFBc0RDLFdBQXZELENBQU4sQ0FBMEVDLE9BQTFFLENBQWtGLEdBQWxGO0FBRUFMLFlBQUFBLE1BQU0sQ0FBQ1EsY0FBRCxDQUFOLENBQXVCTSxHQUF2QixDQUEyQkgsZUFBM0IsQ0FBMkMsVUFBM0M7O0FBRUFDLDhCQUFVQyxLQUFWLENBQWdCTCxjQUFoQjs7QUFFQVIsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNJLGFBQVYsQ0FBd0IsNEJBQXhCLEVBQXNEQyxXQUF2RCxDQUFOLENBQTBFQyxPQUExRSxDQUFrRixHQUFsRjs7QUFsQmtFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBQWxFLEdBQUY7QUFvQkQsQ0E3RE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHJlbmRlciwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB7IFBhZ2luYXRpb24gfSBmcm9tICcuLi8nXG5pbXBvcnQgQmFzZVBhZ2luYXRpb25GaXh0dXJlIGZyb20gJy4uL2ZpeHR1cmVzL0Jhc2VQYWdpbmF0aW9uRml4dHVyZSdcblxuZGVzY3JpYmUoJ1BhZ2luYXRpb24nLCAoKSA9PiB7XG4gIGl0KCdTaG93cyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGlmIGl0cyBub3Qgb3ZlcmZsb3dpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBmaW5kQnlSb2xlIH0gPSByZW5kZXIoPFBhZ2luYXRpb24gcGFnZT17MX0gdG90YWxQYWdlcz17NX0gLz4pXG4gICAgY29uc3QgY29udGFpbmVyID0gYXdhaXQgZmluZEJ5Um9sZSgnbmF2aWdhdGlvbicpXG4gICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKS50b0hhdmVMZW5ndGgoNylcbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvblthcmlhLWxhYmVsfj1cIlBhZ2VcIl0nKSkudG9IYXZlTGVuZ3RoKDUpXG4gICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1jdXJyZW50PVwidHJ1ZVwiJykudGV4dENvbnRlbnQpLnRvRXF1YWwoJzEnKVxuICB9KVxuXG4gIGl0KCdTaG93cyBhIG1heGltdW0gIyBvZiBpdGVtcyBpZiBpdCBpcyBvdmVyZmxvd2luZycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGZpbmRCeVJvbGUgfSA9IHJlbmRlcig8UGFnaW5hdGlvbiBwYWdlPXsxfSB0b3RhbFBhZ2VzPXsxMH0gLz4pXG4gICAgY29uc3QgY29udGFpbmVyID0gYXdhaXQgZmluZEJ5Um9sZSgnbmF2aWdhdGlvbicpXG4gICAgLy8gVHdvIGhhbmRsZXMgKyBhIG1heCBvZiA3IGxpc3QgaXRlbXNcbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpLnRvSGF2ZUxlbmd0aCg5KVxuICB9KVxuXG4gIGl0KCdTaG93cyBlbGxpcHNlcyBpZiB0aGUgY29tcG9uZW50IGlzIG92ZXJmbG93aW5nIGFuZCBwYWdlIDwgNCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGZpbmRCeVJvbGUgfSA9IHJlbmRlcig8UGFnaW5hdGlvbiBwYWdlPXsxfSB0b3RhbFBhZ2VzPXsxMH0gLz4pXG4gICAgY29uc3QgY29udGFpbmVyID0gYXdhaXQgZmluZEJ5Um9sZSgnbmF2aWdhdGlvbicpXG4gICAgZXhwZWN0KGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpKS50b0hhdmVMZW5ndGgoMSlcbiAgICBleHBlY3QoY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJylbMF0udGV4dENvbnRlbnQpLnRvRXF1YWwoJy4uLicpXG4gIH0pXG5cbiAgaXQoJ1Nob3dzIHR3byBlbGxpcHNlcyBpZiB0aGUgY29tcG9uZW50IGlzIG92ZXJmbG93aW5nIGFuZCBwYWdlID4gNCBhbmQgcGFnZSA8IHRvdGFsUGFnZXMgLSA0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZmluZEJ5Um9sZSB9ID0gcmVuZGVyKDxQYWdpbmF0aW9uIHBhZ2U9ezV9IHRvdGFsUGFnZXM9ezEwfSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICBleHBlY3QoY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJykpLnRvSGF2ZUxlbmd0aCgyKVxuICB9KVxuXG4gIGl0KCdTaG93cyBvbmUgZWxsaXBzaXMgaWYgdGhlIHRvdGFsUGFnZXMgLSBwYWdlIDwgNCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGZpbmRCeVJvbGUgfSA9IHJlbmRlcig8UGFnaW5hdGlvbiBwYWdlPXs3fSB0b3RhbFBhZ2VzPXsxMH0gLz4pXG4gICAgY29uc3QgY29udGFpbmVyID0gYXdhaXQgZmluZEJ5Um9sZSgnbmF2aWdhdGlvbicpXG4gICAgZXhwZWN0KGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpKS50b0hhdmVMZW5ndGgoMSlcbiAgfSlcblxuICBpdCgnT25seSByZW5kZXJzIGhhbmRsZXMgaWYgdGhlcmUgYXJlIGFuIHVua25vd24gIyBvZiBwYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGZpbmRCeVJvbGUgfSA9IHJlbmRlcig8UGFnaW5hdGlvbiBwYWdlPXs1fSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpLnRvSGF2ZUxlbmd0aCgyKVxuICB9KVxuXG4gIGl0KCdDbGlja2luZyBvbiB0aGUgaGFuZGxlcyBhZHZhbmNlcyBhbmQgcmV3aW5kcyB0aGUgY3VycmVudCBwYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZmluZEJ5Um9sZSB9ID0gcmVuZGVyKDxCYXNlUGFnaW5hdGlvbkZpeHR1cmUgLz4pXG4gICAgY29uc3QgY29udGFpbmVyID0gYXdhaXQgZmluZEJ5Um9sZSgnbmF2aWdhdGlvbicpXG4gICAgY29uc3QgcGFnaW5hdGlvbkl0ZW1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJylcbiAgICBjb25zdCBwcmV2aW91c0hhbmRsZSA9IHBhZ2luYXRpb25JdGVtc1swXS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuICAgIGNvbnN0IG5leHRIYW5kbGUgPSBwYWdpbmF0aW9uSXRlbXNbcGFnaW5hdGlvbkl0ZW1zLmxlbmd0aCAtIDFdLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICBleHBlY3QocHJldmlvdXNIYW5kbGUpLnRvSGF2ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKVxuICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uW2FyaWEtY3VycmVudD1cInRydWVcIicpLnRleHRDb250ZW50KS50b0VxdWFsKCcxJylcblxuICAgIGZpcmVFdmVudC5jbGljayhuZXh0SGFuZGxlKVxuXG4gICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1jdXJyZW50PVwidHJ1ZVwiJykudGV4dENvbnRlbnQpLnRvRXF1YWwoJzInKVxuXG4gICAgZXhwZWN0KHByZXZpb3VzSGFuZGxlKS5ub3QudG9IYXZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG5cbiAgICBmaXJlRXZlbnQuY2xpY2socHJldmlvdXNIYW5kbGUpXG5cbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblthcmlhLWN1cnJlbnQ9XCJ0cnVlXCInKS50ZXh0Q29udGVudCkudG9FcXVhbCgnMScpXG4gIH0pXG59KVxuIl19
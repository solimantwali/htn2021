import _asyncToGenerator from "@babel/runtime/helpers/esm/asyncToGenerator";
import _regeneratorRuntime from "@babel/runtime/regenerator";
import React from 'react';
import { render, fireEvent } from '@testing-library/react';
import { Pagination } from '../';
import BasePaginationFixture from '../fixtures/BasePaginationFixture';
describe('Pagination', function () {
  it('Shows the number of items if its not overflowing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
    var _render, findByRole, container;

    return _regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _render = render( /*#__PURE__*/React.createElement(Pagination, {
              page: 1,
              totalPages: 5
            })), findByRole = _render.findByRole;
            _context.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context.sent;
            expect(container.querySelectorAll('li')).toHaveLength(7);
            expect(container.querySelectorAll('button[aria-label~="Page"]')).toHaveLength(5);
            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('1');

          case 7:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  })));
  it('Shows a maximum # of items if it is overflowing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {
    var _render2, findByRole, container;

    return _regeneratorRuntime.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _render2 = render( /*#__PURE__*/React.createElement(Pagination, {
              page: 1,
              totalPages: 10
            })), findByRole = _render2.findByRole;
            _context2.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context2.sent;
            // Two handles + a max of 7 list items
            expect(container.querySelectorAll('li')).toHaveLength(9);

          case 5:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  })));
  it('Shows ellipses if the component is overflowing and page < 4', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {
    var _render3, findByRole, container;

    return _regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _render3 = render( /*#__PURE__*/React.createElement(Pagination, {
              page: 1,
              totalPages: 10
            })), findByRole = _render3.findByRole;
            _context3.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context3.sent;
            expect(container.getElementsByTagName('span')).toHaveLength(1);
            expect(container.getElementsByTagName('span')[0].textContent).toEqual('...');

          case 6:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3);
  })));
  it('Shows two ellipses if the component is overflowing and page > 4 and page < totalPages - 4', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {
    var _render4, findByRole, container;

    return _regeneratorRuntime.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            _render4 = render( /*#__PURE__*/React.createElement(Pagination, {
              page: 5,
              totalPages: 10
            })), findByRole = _render4.findByRole;
            _context4.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context4.sent;
            expect(container.getElementsByTagName('span')).toHaveLength(2);

          case 5:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee4);
  })));
  it('Shows one ellipsis if the totalPages - page < 4', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {
    var _render5, findByRole, container;

    return _regeneratorRuntime.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _render5 = render( /*#__PURE__*/React.createElement(Pagination, {
              page: 7,
              totalPages: 10
            })), findByRole = _render5.findByRole;
            _context5.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context5.sent;
            expect(container.getElementsByTagName('span')).toHaveLength(1);

          case 5:
          case "end":
            return _context5.stop();
        }
      }
    }, _callee5);
  })));
  it('Only renders handles if there are an unknown # of pages', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {
    var _render6, findByRole, container;

    return _regeneratorRuntime.wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            _render6 = render( /*#__PURE__*/React.createElement(Pagination, {
              page: 5
            })), findByRole = _render6.findByRole;
            _context6.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context6.sent;
            expect(container.querySelectorAll('li')).toHaveLength(2);

          case 5:
          case "end":
            return _context6.stop();
        }
      }
    }, _callee6);
  })));
  it('Clicking on the handles advances and rewinds the current page', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {
    var _render7, findByRole, container, paginationItems, previousHandle, nextHandle;

    return _regeneratorRuntime.wrap(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            _render7 = render( /*#__PURE__*/React.createElement(BasePaginationFixture, null)), findByRole = _render7.findByRole;
            _context7.next = 3;
            return findByRole('navigation');

          case 3:
            container = _context7.sent;
            paginationItems = container.querySelectorAll('li');
            previousHandle = paginationItems[0].querySelector('button');
            nextHandle = paginationItems[paginationItems.length - 1].querySelector('button');
            expect(previousHandle).toHaveAttribute('disabled');
            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('1');
            fireEvent.click(nextHandle);
            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('2');
            expect(previousHandle).not.toHaveAttribute('disabled');
            fireEvent.click(previousHandle);
            expect(container.querySelector('button[aria-current="true"').textContent).toEqual('1');

          case 14:
          case "end":
            return _context7.stop();
        }
      }
    }, _callee7);
  })));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wYWdpbmF0aW9uL19fdGVzdHNfXy9QYWdpbmF0aW9uLnRlc3QuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJyZW5kZXIiLCJmaXJlRXZlbnQiLCJQYWdpbmF0aW9uIiwiQmFzZVBhZ2luYXRpb25GaXh0dXJlIiwiZGVzY3JpYmUiLCJpdCIsImZpbmRCeVJvbGUiLCJjb250YWluZXIiLCJleHBlY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9IYXZlTGVuZ3RoIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwidG9FcXVhbCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFnaW5hdGlvbkl0ZW1zIiwicHJldmlvdXNIYW5kbGUiLCJuZXh0SGFuZGxlIiwibGVuZ3RoIiwidG9IYXZlQXR0cmlidXRlIiwiY2xpY2siLCJub3QiXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBT0EsS0FBUCxNQUFrQixPQUFsQjtBQUNBLFNBQVNDLE1BQVQsRUFBaUJDLFNBQWpCLFFBQWtDLHdCQUFsQztBQUNBLFNBQVNDLFVBQVQsUUFBMkIsS0FBM0I7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQyxtQ0FBbEM7QUFFQUMsUUFBUSxDQUFDLFlBQUQsRUFBZSxZQUFNO0FBQzNCQyxFQUFBQSxFQUFFLENBQUMsa0RBQUQsd0VBQXFEO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFDOUJMLE1BQU0sZUFBQyxvQkFBQyxVQUFEO0FBQVksY0FBQSxJQUFJLEVBQUUsQ0FBbEI7QUFBcUIsY0FBQSxVQUFVLEVBQUU7QUFBakMsY0FBRCxDQUR3QixFQUM3Q00sVUFENkMsV0FDN0NBLFVBRDZDO0FBQUE7QUFBQSxtQkFFN0JBLFVBQVUsQ0FBQyxZQUFELENBRm1COztBQUFBO0FBRS9DQyxZQUFBQSxTQUYrQztBQUdyREMsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNFLGdCQUFWLENBQTJCLElBQTNCLENBQUQsQ0FBTixDQUF5Q0MsWUFBekMsQ0FBc0QsQ0FB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QUFDUSxjQUFELENBQU4sQ0FBdUJHLGVBQXZCLENBQXVDLFVBQXZDO0FBQ0FYLFlBQUFBLE1BQU0sQ0FBQ0QsU0FBUyxDQUFDSSxhQUFWLENBQXdCLDRCQUF4QixFQUFzREMsV0FBdkQsQ0FBTixDQUEwRUMsT0FBMUUsQ0FBa0YsR0FBbEY7QUFFQVosWUFBQUEsU0FBUyxDQUFDbUIsS0FBVixDQUFnQkgsVUFBaEI7QUFFQVQsWUFBQUEsTUFBTSxDQUFDRCxTQUFTLENBQUNJLGFBQVYsQ0FBd0IsNEJBQXhCLEVBQXNEQyxXQUF2RCxDQUFOLENBQTBFQyxPQUExRSxDQUFrRixHQUFsRjtBQUVBTCxZQUFBQSxNQUFNLENBQUNRLGNBQUQsQ0FBTixDQUF1QkssR0FBdkIsQ0FBMkJGLGVBQTNCLENBQTJDLFVBQTNDO0FBRUFsQixZQUFBQSxTQUFTLENBQUNtQixLQUFWLENBQWdCSixjQUFoQjtBQUVBUixZQUFBQSxNQUFNLENBQUNELFNBQVMsQ0FBQ0ksYUFBVixDQUF3Qiw0QkFBeEIsRUFBc0RDLFdBQXZELENBQU4sQ0FBMEVDLE9BQTFFLENBQWtGLEdBQWxGOztBQWxCa0U7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FBbEUsR0FBRjtBQW9CRCxDQTdETyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuaW1wb3J0IHsgUGFnaW5hdGlvbiB9IGZyb20gJy4uLydcbmltcG9ydCBCYXNlUGFnaW5hdGlvbkZpeHR1cmUgZnJvbSAnLi4vZml4dHVyZXMvQmFzZVBhZ2luYXRpb25GaXh0dXJlJ1xuXG5kZXNjcmliZSgnUGFnaW5hdGlvbicsICgpID0+IHtcbiAgaXQoJ1Nob3dzIHRoZSBudW1iZXIgb2YgaXRlbXMgaWYgaXRzIG5vdCBvdmVyZmxvd2luZycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGZpbmRCeVJvbGUgfSA9IHJlbmRlcig8UGFnaW5hdGlvbiBwYWdlPXsxfSB0b3RhbFBhZ2VzPXs1fSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpLnRvSGF2ZUxlbmd0aCg3KVxuICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2FyaWEtbGFiZWx+PVwiUGFnZVwiXScpKS50b0hhdmVMZW5ndGgoNSlcbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblthcmlhLWN1cnJlbnQ9XCJ0cnVlXCInKS50ZXh0Q29udGVudCkudG9FcXVhbCgnMScpXG4gIH0pXG5cbiAgaXQoJ1Nob3dzIGEgbWF4aW11bSAjIG9mIGl0ZW1zIGlmIGl0IGlzIG92ZXJmbG93aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZmluZEJ5Um9sZSB9ID0gcmVuZGVyKDxQYWdpbmF0aW9uIHBhZ2U9ezF9IHRvdGFsUGFnZXM9ezEwfSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICAvLyBUd28gaGFuZGxlcyArIGEgbWF4IG9mIDcgbGlzdCBpdGVtc1xuICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnbGknKSkudG9IYXZlTGVuZ3RoKDkpXG4gIH0pXG5cbiAgaXQoJ1Nob3dzIGVsbGlwc2VzIGlmIHRoZSBjb21wb25lbnQgaXMgb3ZlcmZsb3dpbmcgYW5kIHBhZ2UgPCA0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZmluZEJ5Um9sZSB9ID0gcmVuZGVyKDxQYWdpbmF0aW9uIHBhZ2U9ezF9IHRvdGFsUGFnZXM9ezEwfSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICBleHBlY3QoY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJykpLnRvSGF2ZUxlbmd0aCgxKVxuICAgIGV4cGVjdChjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKVswXS50ZXh0Q29udGVudCkudG9FcXVhbCgnLi4uJylcbiAgfSlcblxuICBpdCgnU2hvd3MgdHdvIGVsbGlwc2VzIGlmIHRoZSBjb21wb25lbnQgaXMgb3ZlcmZsb3dpbmcgYW5kIHBhZ2UgPiA0IGFuZCBwYWdlIDwgdG90YWxQYWdlcyAtIDQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBmaW5kQnlSb2xlIH0gPSByZW5kZXIoPFBhZ2luYXRpb24gcGFnZT17NX0gdG90YWxQYWdlcz17MTB9IC8+KVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGF3YWl0IGZpbmRCeVJvbGUoJ25hdmlnYXRpb24nKVxuICAgIGV4cGVjdChjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKSkudG9IYXZlTGVuZ3RoKDIpXG4gIH0pXG5cbiAgaXQoJ1Nob3dzIG9uZSBlbGxpcHNpcyBpZiB0aGUgdG90YWxQYWdlcyAtIHBhZ2UgPCA0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZmluZEJ5Um9sZSB9ID0gcmVuZGVyKDxQYWdpbmF0aW9uIHBhZ2U9ezd9IHRvdGFsUGFnZXM9ezEwfSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICBleHBlY3QoY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJykpLnRvSGF2ZUxlbmd0aCgxKVxuICB9KVxuXG4gIGl0KCdPbmx5IHJlbmRlcnMgaGFuZGxlcyBpZiB0aGVyZSBhcmUgYW4gdW5rbm93biAjIG9mIHBhZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZmluZEJ5Um9sZSB9ID0gcmVuZGVyKDxQYWdpbmF0aW9uIHBhZ2U9ezV9IC8+KVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGF3YWl0IGZpbmRCeVJvbGUoJ25hdmlnYXRpb24nKVxuICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnbGknKSkudG9IYXZlTGVuZ3RoKDIpXG4gIH0pXG5cbiAgaXQoJ0NsaWNraW5nIG9uIHRoZSBoYW5kbGVzIGFkdmFuY2VzIGFuZCByZXdpbmRzIHRoZSBjdXJyZW50IHBhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBmaW5kQnlSb2xlIH0gPSByZW5kZXIoPEJhc2VQYWdpbmF0aW9uRml4dHVyZSAvPilcbiAgICBjb25zdCBjb250YWluZXIgPSBhd2FpdCBmaW5kQnlSb2xlKCduYXZpZ2F0aW9uJylcbiAgICBjb25zdCBwYWdpbmF0aW9uSXRlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnbGknKVxuICAgIGNvbnN0IHByZXZpb3VzSGFuZGxlID0gcGFnaW5hdGlvbkl0ZW1zWzBdLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG4gICAgY29uc3QgbmV4dEhhbmRsZSA9IHBhZ2luYXRpb25JdGVtc1twYWdpbmF0aW9uSXRlbXMubGVuZ3RoIC0gMV0ucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIGV4cGVjdChwcmV2aW91c0hhbmRsZSkudG9IYXZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b25bYXJpYS1jdXJyZW50PVwidHJ1ZVwiJykudGV4dENvbnRlbnQpLnRvRXF1YWwoJzEnKVxuXG4gICAgZmlyZUV2ZW50LmNsaWNrKG5leHRIYW5kbGUpXG5cbiAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblthcmlhLWN1cnJlbnQ9XCJ0cnVlXCInKS50ZXh0Q29udGVudCkudG9FcXVhbCgnMicpXG5cbiAgICBleHBlY3QocHJldmlvdXNIYW5kbGUpLm5vdC50b0hhdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcblxuICAgIGZpcmVFdmVudC5jbGljayhwcmV2aW91c0hhbmRsZSlcblxuICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uW2FyaWEtY3VycmVudD1cInRydWVcIicpLnRleHRDb250ZW50KS50b0VxdWFsKCcxJylcbiAgfSlcbn0pXG4iXX0=
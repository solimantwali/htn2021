import _extends from "@babel/runtime/helpers/esm/extends";
import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";

var _paneProps, _subpaneProps, _animationStylesClass;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

import React, { memo } from 'react';
import { css } from 'glamor';
import PropTypes from 'prop-types';
import { Position } from '../../constants';
import { Pane } from '../../layers';
import { Overlay } from '../../overlay';
import SheetClose from './SheetClose';
var paneProps = (_paneProps = {}, _defineProperty(_paneProps, Position.LEFT, {
  height: '100vh',
  maxWidth: '100vw',
  position: 'absolute',
  left: 0,
  right: 'auto'
}), _defineProperty(_paneProps, Position.RIGHT, {
  height: '100vh',
  maxWidth: '100vw',
  position: 'absolute',
  right: 0,
  left: 'auto'
}), _defineProperty(_paneProps, Position.TOP, {
  width: '100vw',
  position: 'absolute',
  maxHeight: '100vh',
  top: 0,
  bottom: 'auto'
}), _defineProperty(_paneProps, Position.BOTTOM, {
  width: '100vw',
  maxHeight: '100vh',
  position: 'absolute',
  bottom: 0,
  top: 'auto'
}), _paneProps);
var subpaneProps = (_subpaneProps = {}, _defineProperty(_subpaneProps, Position.LEFT, {
  height: '100vh'
}), _defineProperty(_subpaneProps, Position.RIGHT, {
  height: '100vh'
}), _defineProperty(_subpaneProps, Position.TOP, {
  width: '100vw'
}), _defineProperty(_subpaneProps, Position.BOTTOM, {
  width: '100vw'
}), _subpaneProps);
var animationEasing = {
  deceleration: 'cubic-bezier(0.0, 0.0, 0.2, 1)',
  acceleration: 'cubic-bezier(0.4, 0.0, 1, 1)'
};
var ANIMATION_DURATION = 240;

var withAnimations = function withAnimations(animateIn, animateOut) {
  return {
    '&[data-state="entering"], &[data-state="entered"]': {
      animation: "".concat(animateIn, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.deceleration, " both")
    },
    '&[data-state="exiting"]': {
      animation: "".concat(animateOut, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.acceleration, " both")
    }
  };
};

var animationStylesClass = (_animationStylesClass = {}, _defineProperty(_animationStylesClass, Position.LEFT, _objectSpread({
  transform: 'translateX(-100%)'
}, withAnimations(css.keyframes('anchoredLeftSlideInAnimation', {
  from: {
    transform: 'translateX(-100%)'
  },
  to: {
    transform: 'translateX(0)'
  }
}), css.keyframes('anchoredLeftSlideOutAnimation', {
  from: {
    transform: 'translateX(0)'
  },
  to: {
    transform: 'translateX(-100%)'
  }
})))), _defineProperty(_animationStylesClass, Position.RIGHT, _objectSpread({
  transform: 'translateX(100%)'
}, withAnimations(css.keyframes('anchoredRightSlideInAnimation', {
  from: {
    transform: 'translateX(100%)'
  },
  to: {
    transform: 'translateX(0)'
  }
}), css.keyframes('anchoredRightSlideOutAnimation', {
  from: {
    transform: 'translateX(0)'
  },
  to: {
    transform: 'translateX(100%)'
  }
})))), _defineProperty(_animationStylesClass, Position.TOP, _objectSpread({
  transform: 'translateY(-100%)'
}, withAnimations(css.keyframes('anchoredTopSlideInAnimation', {
  from: {
    transform: 'translateY(-100%)'
  },
  to: {
    transform: 'translateY(0)'
  }
}), css.keyframes('anchoredTopSlideOutAnimation', {
  from: {
    transform: 'translateY(0)'
  },
  to: {
    transform: 'translateY(-100%)'
  }
})))), _defineProperty(_animationStylesClass, Position.BOTTOM, _objectSpread({
  transform: 'translateY(100%)'
}, withAnimations(css.keyframes('anchoredBottomSlideInAnimation', {
  from: {
    transform: 'translateY(100%)'
  },
  to: {
    transform: 'translateY(0)'
  }
}), css.keyframes('anchoredBottomSlideOutAnimation', {
  from: {
    transform: 'translateY(0)'
  },
  to: {
    transform: 'translateY(100%)'
  }
})))), _animationStylesClass);

var noop = function noop() {};

var SideSheet = /*#__PURE__*/memo(function SideSheet(props) {
  var _props$width = props.width,
      width = _props$width === void 0 ? 620 : _props$width,
      isShown = props.isShown,
      children = props.children,
      containerProps = props.containerProps,
      _props$onOpenComplete = props.onOpenComplete,
      onOpenComplete = _props$onOpenComplete === void 0 ? noop : _props$onOpenComplete,
      _props$onCloseComplet = props.onCloseComplete,
      onCloseComplete = _props$onCloseComplet === void 0 ? noop : _props$onCloseComplet,
      onBeforeClose = props.onBeforeClose,
      _props$shouldCloseOnO = props.shouldCloseOnOverlayClick,
      shouldCloseOnOverlayClick = _props$shouldCloseOnO === void 0 ? true : _props$shouldCloseOnO,
      _props$shouldCloseOnE = props.shouldCloseOnEscapePress,
      shouldCloseOnEscapePress = _props$shouldCloseOnE === void 0 ? true : _props$shouldCloseOnE,
      _props$position = props.position,
      position = _props$position === void 0 ? Position.RIGHT : _props$position,
      preventBodyScrolling = props.preventBodyScrolling;
  return /*#__PURE__*/React.createElement(Overlay, {
    isShown: isShown,
    shouldCloseOnClick: shouldCloseOnOverlayClick,
    shouldCloseOnEscapePress: shouldCloseOnEscapePress,
    onBeforeClose: onBeforeClose,
    onExited: onCloseComplete,
    onEntered: onOpenComplete,
    preventBodyScrolling: preventBodyScrolling
  }, function (_ref) {
    var close = _ref.close,
        state = _ref.state;
    return /*#__PURE__*/React.createElement(Pane, _extends({
      width: width
    }, paneProps[position], {
      className: css(animationStylesClass[position]).toString(),
      "data-state": state
    }), /*#__PURE__*/React.createElement(SheetClose, {
      position: position,
      "data-state": state,
      isClosing: false,
      onClick: close
    }), /*#__PURE__*/React.createElement(Pane, _extends({
      elevation: 4,
      backgroundColor: "white",
      overflowY: "auto",
      maxHeight: "100vh",
      "data-state": state,
      width: width
    }, subpaneProps[position], containerProps), typeof children === 'function' ? children({
      close: close
    }) : children));
  });
});
SideSheet.propTypes = {
  /**
   * Children can be a string, node or a function accepting `({ close })`.
   */
  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,

  /**
   * When true, the Side Sheet is shown.
   */
  isShown: PropTypes.bool,

  /**
   * Function that will be called when the exit transition is complete.
   */
  onCloseComplete: PropTypes.func,

  /**
   * Function that will be called when the enter transition is complete.
   */
  onOpenComplete: PropTypes.func,

  /**
   * Function called when overlay is about to close.
   * Return `false` to prevent the sheet from closing.
   * type: `Function -> Boolean`
   */
  onBeforeClose: PropTypes.func,

  /**
   * Boolean indicating if clicking the overlay should close the overlay.
   */
  shouldCloseOnOverlayClick: PropTypes.bool,

  /**
   * Boolean indicating if pressing the esc key should close the overlay.
   */
  shouldCloseOnEscapePress: PropTypes.bool,

  /**
   * Width of the SideSheet.
   */
  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * Properties to pass through the SideSheet container Pane.
   */
  containerProps: PropTypes.object,

  /**
   * Positions the sheet to the top, left, right, or bottom of the screen.
   */
  position: PropTypes.oneOf([Position.TOP, Position.BOTTOM, Position.LEFT, Position.RIGHT]),

  /**
   * Whether or not to prevent scrolling in the outer body
   */
  preventBodyScrolling: PropTypes.bool
};
export default SideSheet;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXNoZWV0L3NyYy9TaWRlU2hlZXQuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJtZW1vIiwiY3NzIiwiUHJvcFR5cGVzIiwiUG9zaXRpb24iLCJQYW5lIiwiT3ZlcmxheSIsIlNoZWV0Q2xvc2UiLCJwYW5lUHJvcHMiLCJMRUZUIiwiaGVpZ2h0IiwibWF4V2lkdGgiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsIlJJR0hUIiwiVE9QIiwid2lkdGgiLCJtYXhIZWlnaHQiLCJ0b3AiLCJib3R0b20iLCJCT1RUT00iLCJzdWJwYW5lUHJvcHMiLCJhbmltYXRpb25FYXNpbmciLCJkZWNlbGVyYXRpb24iLCJhY2NlbGVyYXRpb24iLCJBTklNQVRJT05fRFVSQVRJT04iLCJ3aXRoQW5pbWF0aW9ucyIsImFuaW1hdGVJbiIsImFuaW1hdGVPdXQiLCJhbmltYXRpb24iLCJhbmltYXRpb25TdHlsZXNDbGFzcyIsInRyYW5zZm9ybSIsImtleWZyYW1lcyIsImZyb20iLCJ0byIsIm5vb3AiLCJTaWRlU2hlZXQiLCJwcm9wcyIsImlzU2hvd24iLCJjaGlsZHJlbiIsImNvbnRhaW5lclByb3BzIiwib25PcGVuQ29tcGxldGUiLCJvbkNsb3NlQ29tcGxldGUiLCJvbkJlZm9yZUNsb3NlIiwic2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayIsInNob3VsZENsb3NlT25Fc2NhcGVQcmVzcyIsInByZXZlbnRCb2R5U2Nyb2xsaW5nIiwiY2xvc2UiLCJzdGF0ZSIsInRvU3RyaW5nIiwicHJvcFR5cGVzIiwib25lT2ZUeXBlIiwibm9kZSIsImZ1bmMiLCJpc1JlcXVpcmVkIiwiYm9vbCIsInN0cmluZyIsIm51bWJlciIsIm9iamVjdCIsIm9uZU9mIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxJQUFoQixRQUE0QixPQUE1QjtBQUNBLFNBQVNDLEdBQVQsUUFBb0IsUUFBcEI7QUFDQSxPQUFPQyxTQUFQLE1BQXNCLFlB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RUFBRXRDLFNBQVMsQ0FBQ3dELE1BOUNOOztBQWdEcEI7QUFDRjtBQUNBO0FBQ0UvQyxFQUFBQSxRQUFRLEVBQUVULFNBQVMsQ0FBQ3lELEtBQVYsQ0FBZ0IsQ0FBQ3hELFFBQVEsQ0FBQ1ksR0FBVixFQUFlWixRQUFRLENBQUNpQixNQUF4QixFQUFnQ2pCLFFBQVEsQ0FBQ0ssSUFBekMsRUFBK0NMLFFBQVEsQ0FBQ1csS0FBeEQsQ0FBaEIsQ0FuRFU7O0FBcURwQjtBQUNGO0FBQ0E7QUFDRWdDLEVBQUFBLG9CQUFvQixFQUFFNUMsU0FBUyxDQUFDcUQ7QUF4RFosQ0FBdEI7QUEyREEsZUFBZW5CLFNBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgbWVtbyB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnZ2xhbW9yJ1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IHsgUG9zaXRpb24gfSBmcm9tICcuLi8uLi9jb25zdGFudHMnXG5pbXBvcnQgeyBQYW5lIH0gZnJvbSAnLi4vLi4vbGF5ZXJzJ1xuaW1wb3J0IHsgT3ZlcmxheSB9IGZyb20gJy4uLy4uL292ZXJsYXknXG5pbXBvcnQgU2hlZXRDbG9zZSBmcm9tICcuL1NoZWV0Q2xvc2UnXG5cbmNvbnN0IHBhbmVQcm9wcyA9IHtcbiAgW1Bvc2l0aW9uLkxFRlRdOiB7XG4gICAgaGVpZ2h0OiAnMTAwdmgnLFxuICAgIG1heFdpZHRoOiAnMTAwdncnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6ICdhdXRvJ1xuICB9LFxuICBbUG9zaXRpb24uUklHSFRdOiB7XG4gICAgaGVpZ2h0OiAnMTAwdmgnLFxuICAgIG1heFdpZHRoOiAnMTAwdncnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHJpZ2h0OiAwLFxuICAgIGxlZnQ6ICdhdXRvJ1xuICB9LFxuICBbUG9zaXRpb24uVE9QXToge1xuICAgIHdpZHRoOiAnMTAwdncnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIG1heEhlaWdodDogJzEwMHZoJyxcbiAgICB0b3A6IDAsXG4gICAgYm90dG9tOiAnYXV0bydcbiAgfSxcbiAgW1Bvc2l0aW9uLkJPVFRPTV06IHtcbiAgICB3aWR0aDogJzEwMHZ3JyxcbiAgICBtYXhIZWlnaHQ6ICcxMDB2aCcsXG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgYm90dG9tOiAwLFxuICAgIHRvcDogJ2F1dG8nXG4gIH1cbn1cblxuY29uc3Qgc3VicGFuZVByb3BzID0ge1xuICBbUG9zaXRpb24uTEVGVF06IHtcbiAgICBoZWlnaHQ6ICcxMDB2aCdcbiAgfSxcbiAgW1Bvc2l0aW9uLlJJR0hUXToge1xuICAgIGhlaWdodDogJzEwMHZoJ1xuICB9LFxuICBbUG9zaXRpb24uVE9QXToge1xuICAgIHdpZHRoOiAnMTAwdncnXG4gIH0sXG4gIFtQb3NpdGlvbi5CT1RUT01dOiB7XG4gICAgd2lkdGg6ICcxMDB2dydcbiAgfVxufVxuXG5jb25zdCBhbmltYXRpb25FYXNpbmcgPSB7XG4gIGRlY2VsZXJhdGlvbjogJ2N1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKScsXG4gIGFjY2VsZXJhdGlvbjogJ2N1YmljLWJlemllcigwLjQsIDAuMCwgMSwgMSknXG59XG5cbmNvbnN0IEFOSU1BVElPTl9EVVJBVElPTiA9IDI0MFxuXG5jb25zdCB3aXRoQW5pbWF0aW9ucyA9IChhbmltYXRlSW4sIGFuaW1hdGVPdXQpID0+IHtcbiAgcmV0dXJuIHtcbiAgICAnJltkYXRhLXN0YXRlPVwiZW50ZXJpbmdcIl0sICZbZGF0YS1zdGF0ZT1cImVudGVyZWRcIl0nOiB7XG4gICAgICBhbmltYXRpb246IGAke2FuaW1hdGVJbn0gJHtBTklNQVRJT05fRFVSQVRJT059bXMgJHthbmltYXRpb25FYXNpbmcuZGVjZWxlcmF0aW9ufSBib3RoYFxuICAgIH0sXG4gICAgJyZbZGF0YS1zdGF0ZT1cImV4aXRpbmdcIl0nOiB7XG4gICAgICBhbmltYXRpb246IGAke2FuaW1hdGVPdXR9ICR7QU5JTUFUSU9OX0RVUkFUSU9OfW1zICR7YW5pbWF0aW9uRWFzaW5nLmFjY2VsZXJhdGlvbn0gYm90aGBcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgYW5pbWF0aW9uU3R5bGVzQ2xhc3MgPSB7XG4gIFtQb3NpdGlvbi5MRUZUXToge1xuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTEwMCUpJyxcbiAgICAuLi53aXRoQW5pbWF0aW9ucyhcbiAgICAgIGNzcy5rZXlmcmFtZXMoJ2FuY2hvcmVkTGVmdFNsaWRlSW5BbmltYXRpb24nLCB7XG4gICAgICAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtMTAwJSknIH0sXG4gICAgICAgIHRvOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCknIH1cbiAgICAgIH0pLFxuICAgICAgY3NzLmtleWZyYW1lcygnYW5jaG9yZWRMZWZ0U2xpZGVPdXRBbmltYXRpb24nLCB7XG4gICAgICAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwKScgfSxcbiAgICAgICAgdG86IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtMTAwJSknIH1cbiAgICAgIH0pXG4gICAgKVxuICB9LFxuICBbUG9zaXRpb24uUklHSFRdOiB7XG4gICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgxMDAlKScsXG4gICAgLi4ud2l0aEFuaW1hdGlvbnMoXG4gICAgICBjc3Mua2V5ZnJhbWVzKCdhbmNob3JlZFJpZ2h0U2xpZGVJbkFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDEwMCUpJyB9LFxuICAgICAgICB0bzogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDApJyB9XG4gICAgICB9KSxcbiAgICAgIGNzcy5rZXlmcmFtZXMoJ2FuY2hvcmVkUmlnaHRTbGlkZU91dEFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDApJyB9LFxuICAgICAgICB0bzogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDEwMCUpJyB9XG4gICAgICB9KVxuICAgIClcbiAgfSxcbiAgW1Bvc2l0aW9uLlRPUF06IHtcbiAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDAlKScsXG4gICAgLi4ud2l0aEFuaW1hdGlvbnMoXG4gICAgICBjc3Mua2V5ZnJhbWVzKCdhbmNob3JlZFRvcFNsaWRlSW5BbmltYXRpb24nLCB7XG4gICAgICAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtMTAwJSknIH0sXG4gICAgICAgIHRvOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknIH1cbiAgICAgIH0pLFxuICAgICAgY3NzLmtleWZyYW1lcygnYW5jaG9yZWRUb3BTbGlkZU91dEFuaW1hdGlvbicsIHtcbiAgICAgICAgZnJvbTogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJyB9LFxuICAgICAgICB0bzogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xMDAlKScgfVxuICAgICAgfSlcbiAgICApXG4gIH0sXG4gIFtQb3NpdGlvbi5CT1RUT01dOiB7XG4gICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgxMDAlKScsXG4gICAgLi4ud2l0aEFuaW1hdGlvbnMoXG4gICAgICBjc3Mua2V5ZnJhbWVzKCdhbmNob3JlZEJvdHRvbVNsaWRlSW5BbmltYXRpb24nLCB7XG4gICAgICAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgxMDAlKScgfSxcbiAgICAgICAgdG86IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgwKScgfVxuICAgICAgfSksXG4gICAgICBjc3Mua2V5ZnJhbWVzKCdhbmNob3JlZEJvdHRvbVNsaWRlT3V0QW5pbWF0aW9uJywge1xuICAgICAgICBmcm9tOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknIH0sXG4gICAgICAgIHRvOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMTAwJSknIH1cbiAgICAgIH0pXG4gICAgKVxuICB9XG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fVxuXG5jb25zdCBTaWRlU2hlZXQgPSBtZW1vKGZ1bmN0aW9uIFNpZGVTaGVldChwcm9wcykge1xuICBjb25zdCB7XG4gICAgd2lkdGggPSA2MjAsXG4gICAgaXNTaG93bixcbiAgICBjaGlsZHJlbixcbiAgICBjb250YWluZXJQcm9wcyxcbiAgICBvbk9wZW5Db21wbGV0ZSA9IG5vb3AsXG4gICAgb25DbG9zZUNvbXBsZXRlID0gbm9vcCxcbiAgICBvbkJlZm9yZUNsb3NlLFxuICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2sgPSB0cnVlLFxuICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzcyA9IHRydWUsXG4gICAgcG9zaXRpb24gPSBQb3NpdGlvbi5SSUdIVCxcbiAgICBwcmV2ZW50Qm9keVNjcm9sbGluZ1xuICB9ID0gcHJvcHNcblxuICByZXR1cm4gKFxuICAgIDxPdmVybGF5XG4gICAgICBpc1Nob3duPXtpc1Nob3dufVxuICAgICAgc2hvdWxkQ2xvc2VPbkNsaWNrPXtzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrfVxuICAgICAgc2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzPXtzaG91bGRDbG9zZU9uRXNjYXBlUHJlc3N9XG4gICAgICBvbkJlZm9yZUNsb3NlPXtvbkJlZm9yZUNsb3NlfVxuICAgICAgb25FeGl0ZWQ9e29uQ2xvc2VDb21wbGV0ZX1cbiAgICAgIG9uRW50ZXJlZD17b25PcGVuQ29tcGxldGV9XG4gICAgICBwcmV2ZW50Qm9keVNjcm9sbGluZz17cHJldmVudEJvZHlTY3JvbGxpbmd9XG4gICAgPlxuICAgICAgeyh7IGNsb3NlLCBzdGF0ZSB9KSA9PiAoXG4gICAgICAgIDxQYW5lXG4gICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgIHsuLi5wYW5lUHJvcHNbcG9zaXRpb25dfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y3NzKGFuaW1hdGlvblN0eWxlc0NsYXNzW3Bvc2l0aW9uXSkudG9TdHJpbmcoKX1cbiAgICAgICAgICBkYXRhLXN0YXRlPXtzdGF0ZX1cbiAgICAgICAgPlxuICAgICAgICAgIDxTaGVldENsb3NlIHBvc2l0aW9uPXtwb3NpdGlvbn0gZGF0YS1zdGF0ZT17c3RhdGV9IGlzQ2xvc2luZz17ZmFsc2V9IG9uQ2xpY2s9e2Nsb3NlfSAvPlxuICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICBlbGV2YXRpb249ezR9XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwiXG4gICAgICAgICAgICBvdmVyZmxvd1k9XCJhdXRvXCJcbiAgICAgICAgICAgIG1heEhlaWdodD1cIjEwMHZoXCJcbiAgICAgICAgICAgIGRhdGEtc3RhdGU9e3N0YXRlfVxuICAgICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgICAgey4uLnN1YnBhbmVQcm9wc1twb3NpdGlvbl19XG4gICAgICAgICAgICB7Li4uY29udGFpbmVyUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3R5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKHsgY2xvc2UgfSkgOiBjaGlsZHJlbn1cbiAgICAgICAgICA8L1BhbmU+XG4gICAgICAgIDwvUGFuZT5cbiAgICAgICl9XG4gICAgPC9PdmVybGF5PlxuICApXG59KVxuXG5TaWRlU2hlZXQucHJvcFR5cGVzID0ge1xuICAvKipcbiAgICogQ2hpbGRyZW4gY2FuIGJlIGEgc3RyaW5nLCBub2RlIG9yIGEgZnVuY3Rpb24gYWNjZXB0aW5nIGAoeyBjbG9zZSB9KWAuXG4gICAqL1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5mdW5jXSkuaXNSZXF1aXJlZCxcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCB0aGUgU2lkZSBTaGVldCBpcyBzaG93bi5cbiAgICovXG4gIGlzU2hvd246IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGV4aXQgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICovXG4gIG9uQ2xvc2VDb21wbGV0ZTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZW50ZXIgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICovXG4gIG9uT3BlbkNvbXBsZXRlOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogRnVuY3Rpb24gY2FsbGVkIHdoZW4gb3ZlcmxheSBpcyBhYm91dCB0byBjbG9zZS5cbiAgICogUmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGUgc2hlZXQgZnJvbSBjbG9zaW5nLlxuICAgKiB0eXBlOiBgRnVuY3Rpb24gLT4gQm9vbGVhbmBcbiAgICovXG4gIG9uQmVmb3JlQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgaWYgY2xpY2tpbmcgdGhlIG92ZXJsYXkgc2hvdWxkIGNsb3NlIHRoZSBvdmVybGF5LlxuICAgKi9cbiAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljazogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyBpZiBwcmVzc2luZyB0aGUgZXNjIGtleSBzaG91bGQgY2xvc2UgdGhlIG92ZXJsYXkuXG4gICAqL1xuICBzaG91bGRDbG9zZU9uRXNjYXBlUHJlc3M6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBXaWR0aCBvZiB0aGUgU2lkZVNoZWV0LlxuICAgKi9cbiAgd2lkdGg6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcblxuICAvKipcbiAgICogUHJvcGVydGllcyB0byBwYXNzIHRocm91Z2ggdGhlIFNpZGVTaGVldCBjb250YWluZXIgUGFuZS5cbiAgICovXG4gIGNvbnRhaW5lclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gIC8qKlxuICAgKiBQb3NpdGlvbnMgdGhlIHNoZWV0IHRvIHRoZSB0b3AsIGxlZnQsIHJpZ2h0LCBvciBib3R0b20gb2YgdGhlIHNjcmVlbi5cbiAgICovXG4gIHBvc2l0aW9uOiBQcm9wVHlwZXMub25lT2YoW1Bvc2l0aW9uLlRPUCwgUG9zaXRpb24uQk9UVE9NLCBQb3NpdGlvbi5MRUZULCBQb3NpdGlvbi5SSUdIVF0pLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byBwcmV2ZW50IHNjcm9sbGluZyBpbiB0aGUgb3V0ZXIgYm9keVxuICAgKi9cbiAgcHJldmVudEJvZHlTY3JvbGxpbmc6IFByb3BUeXBlcy5ib29sXG59XG5cbmV4cG9ydCBkZWZhdWx0IFNpZGVTaGVldFxuIl19
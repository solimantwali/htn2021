import { rehydrate } from 'glamor';
import { hydrate as boxHydrate } from 'ui-box';
import canUseDom from '../../lib/canUseDom';
/**
 * You shouldn't have to manually run this.
 * This is mainly an export for testing purposes.
 */

export function hydrate(hydration) {
  if (hydration.uiBoxCache) {
    boxHydrate(hydration.uiBoxCache);
  }

  if (hydration.glamorIds) {
    rehydrate(hydration.glamorIds);
  }
}
export default function autoHydrate() {
  if (canUseDom) {
    var hydration = document.querySelector('#evergreen-hydrate');

    if (hydration) {
      try {
        var hydrationObject = JSON.parse(hydration.innerHTML);
        hydrate(hydrationObject);
      } catch (error) {
        console.error('Evergreen automatic hydration object is invalid JSON', error);
      }
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zc3Ivc3JjL2F1dG9IeWRyYXRlLmpzIl0sIm5hbWVzIjpbInJlaHlkcmF0ZSIsImh5ZHJhdGUiLCJib3hIeWRyYXRlIiwiY2FuVXNlRG9tIiwiaHlkcmF0aW9uIiwidWlCb3hDYWNoZSIsImdsYW1vcklkcyIsImF1dG9IeWRyYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaHlkcmF0aW9uT2JqZWN0IiwiSlNPTiIsInBhcnNlIiwiaW5uZXJIVE1MIiwiZXJyb3IiLCJjb25zb2xlIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxTQUFULFFBQTBCLFFBQTFCO0FBQ0EsU0FBU0MsT0FBTyxJQUFJQyxVQUFwQixRQUFzQyxRQUF0QztBQUNBLE9BQU9DLFNBQVAsTUFBc0IscUJBQXRCO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsT0FBTyxTQUFTRixPQUFULENBQWlCRyxTQUFqQixFQUE0QjtBQUNqQyxNQUFJQSxTQUFTLENBQUNDLFVBQWQsRUFBMEI7QUFDeEJILElBQUFBLFVBQVUsQ0FBQ0UsU0FBUyxDQUFDQyxVQUFYLENBQVY7QUFDRDs7QUFFRCxNQUFJRCxTQUFTLENBQUNFLFNBQWQsRUFBeUI7QUFDdkJOLElBQUFBLFNBQVMsQ0FBQ0ksU0FBUyxDQUFDRSxTQUFYLENBQVQ7QUFDRDtBQUNGO0FBRUQsZUFBZSxTQUFTQyxXQUFULEdBQXVCO0FBQ3BDLE1BQUlKLFNBQUosRUFBZTtBQUNiLFFBQU1DLFNBQVMsR0FBR0ksUUFBUSxDQUFDQyxhQUFULENBQXVCLG9CQUF2QixDQUFsQjs7QUFFQSxRQUFJTCxTQUFKLEVBQWU7QUFDYixVQUFJO0FBQ0YsWUFBTU0sZUFBZSxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV1IsU0FBUyxDQUFDUyxTQUFyQixDQUF4QjtBQUNBWixRQUFBQSxPQUFPLENBQUNTLGVBQUQsQ0FBUDtBQUNELE9BSEQsQ0FHRSxPQUFPSSxLQUFQLEVBQWM7QUFDZEMsUUFBQUEsT0FBTyxDQUFDRCxLQUFSLENBQWMsc0RBQWQsRUFBc0VBLEtBQXRFO0FBQ0Q7QUFDRjtBQUNGO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWh5ZHJhdGUgfSBmcm9tICdnbGFtb3InXG5pbXBvcnQgeyBoeWRyYXRlIGFzIGJveEh5ZHJhdGUgfSBmcm9tICd1aS1ib3gnXG5pbXBvcnQgY2FuVXNlRG9tIGZyb20gJy4uLy4uL2xpYi9jYW5Vc2VEb20nXG5cbi8qKlxuICogWW91IHNob3VsZG4ndCBoYXZlIHRvIG1hbnVhbGx5IHJ1biB0aGlzLlxuICogVGhpcyBpcyBtYWlubHkgYW4gZXhwb3J0IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaHlkcmF0ZShoeWRyYXRpb24pIHtcbiAgaWYgKGh5ZHJhdGlvbi51aUJveENhY2hlKSB7XG4gICAgYm94SHlkcmF0ZShoeWRyYXRpb24udWlCb3hDYWNoZSlcbiAgfVxuXG4gIGlmIChoeWRyYXRpb24uZ2xhbW9ySWRzKSB7XG4gICAgcmVoeWRyYXRlKGh5ZHJhdGlvbi5nbGFtb3JJZHMpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXV0b0h5ZHJhdGUoKSB7XG4gIGlmIChjYW5Vc2VEb20pIHtcbiAgICBjb25zdCBoeWRyYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXZlcmdyZWVuLWh5ZHJhdGUnKVxuXG4gICAgaWYgKGh5ZHJhdGlvbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaHlkcmF0aW9uT2JqZWN0ID0gSlNPTi5wYXJzZShoeWRyYXRpb24uaW5uZXJIVE1MKVxuICAgICAgICBoeWRyYXRlKGh5ZHJhdGlvbk9iamVjdClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0V2ZXJncmVlbiBhdXRvbWF0aWMgaHlkcmF0aW9uIG9iamVjdCBpcyBpbnZhbGlkIEpTT04nLCBlcnJvcilcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==
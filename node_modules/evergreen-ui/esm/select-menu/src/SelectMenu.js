import _extends from "@babel/runtime/helpers/esm/extends";
import _objectWithoutProperties from "@babel/runtime/helpers/esm/objectWithoutProperties";
var _excluded = ["title", "width", "height", "options", "onSelect", "onDeselect", "onFilterChange", "selected", "position", "hasTitle", "hasFilter", "filterPlaceholder", "filterIcon", "detailView", "emptyView", "titleView", "isMultiSelect", "closeOnSelect", "itemRenderer", "itemHeight"];
import React, { memo, useMemo } from 'react';
import arrify from 'arrify';
import PropTypes from 'prop-types';
import { Position } from '../../constants';
import { SearchIcon } from '../../icons';
import { Popover } from '../../popover';
import OptionShapePropType from './OptionShapePropType';
import SelectedPropType from './SelectedPropType';
import SelectMenuContent from './SelectMenuContent';

var noop = function noop() {};

var SelectMenu = /*#__PURE__*/memo(function SelectMenu(props) {
  var title = props.title,
      _props$width = props.width,
      width = _props$width === void 0 ? 240 : _props$width,
      _props$height = props.height,
      height = _props$height === void 0 ? 248 : _props$height,
      options = props.options,
      _props$onSelect = props.onSelect,
      onSelect = _props$onSelect === void 0 ? noop : _props$onSelect,
      _props$onDeselect = props.onDeselect,
      onDeselect = _props$onDeselect === void 0 ? noop : _props$onDeselect,
      onFilterChange = props.onFilterChange,
      selected = props.selected,
      _props$position = props.position,
      position = _props$position === void 0 ? Position.BOTTOM_LEFT : _props$position,
      hasTitle = props.hasTitle,
      hasFilter = props.hasFilter,
      _props$filterPlacehol = props.filterPlaceholder,
      filterPlaceholder = _props$filterPlacehol === void 0 ? 'Filter...' : _props$filterPlacehol,
      _props$filterIcon = props.filterIcon,
      filterIcon = _props$filterIcon === void 0 ? SearchIcon : _props$filterIcon,
      detailView = props.detailView,
      emptyView = props.emptyView,
      titleView = props.titleView,
      _props$isMultiSelect = props.isMultiSelect,
      isMultiSelect = _props$isMultiSelect === void 0 ? false : _props$isMultiSelect,
      _props$closeOnSelect = props.closeOnSelect,
      closeOnSelect = _props$closeOnSelect === void 0 ? false : _props$closeOnSelect,
      itemRenderer = props.itemRenderer,
      itemHeight = props.itemHeight,
      rest = _objectWithoutProperties(props, _excluded);

  var selectedArray = useMemo(function () {
    return arrify(selected);
  }, [selected]);
  return /*#__PURE__*/React.createElement(Popover, _extends({
    minWidth: width,
    position: position,
    minHeight: height,
    content: function content(_ref) {
      var close = _ref.close;
      return /*#__PURE__*/React.createElement(SelectMenuContent, {
        width: width,
        height: height,
        options: options,
        title: title,
        hasFilter: hasFilter,
        filterPlaceholder: filterPlaceholder,
        filterIcon: filterIcon,
        hasTitle: hasTitle,
        isMultiSelect: isMultiSelect,
        titleView: titleView,
        listProps: {
          onSelect: onSelect,
          onDeselect: onDeselect,
          onFilterChange: onFilterChange,
          selected: selectedArray,
          renderItem: itemRenderer,
          optionSize: itemHeight
        },
        close: close,
        detailView: typeof detailView === 'function' ? detailView({
          close: close
        }) : detailView,
        emptyView: typeof emptyView === 'function' ? emptyView({
          close: close
        }) : emptyView,
        closeOnSelect: closeOnSelect
      });
    }
  }, rest));
});
SelectMenu.propTypes = {
  /**
   * The title of the Select Menu.
   */
  title: PropTypes.string,

  /**
   * The width of the Select Menu.
   */
  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * The height of the Select Menu.
   */
  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * The options to show in the menu.
   * [{ label: String, value: String | Number }]
   */
  options: PropTypes.arrayOf(OptionShapePropType),

  /**
   * Function that is called when an option is selected.
   */
  onSelect: PropTypes.func,

  /**
   * Function that is called when an option is deselected.
   */
  onDeselect: PropTypes.func,

  /**
   * The selected value/values.
   */
  selected: SelectedPropType,

  /**
   * When true, multi select is accounted for.
   */
  isMultiSelect: PropTypes.bool,

  /**
   * When true, show the title.
   */
  hasTitle: PropTypes.bool,

  /**
   * When true, show the filter.
   */
  hasFilter: PropTypes.bool,

  /**
   * The placeholder of the search filter.
   */
  filterPlaceholder: PropTypes.string,

  /**
   * The icon of the search filter.
   */
  filterIcon: PropTypes.oneOfType([PropTypes.elementType, PropTypes.element]),

  /**
   * Function that is called as the onChange() event for the filter.
   */
  onFilterChange: PropTypes.func,

  /**
   * The position of the Select Menu.
   */
  position: PropTypes.oneOf([Position.TOP, Position.TOP_LEFT, Position.TOP_RIGHT, Position.BOTTOM, Position.BOTTOM_LEFT, Position.BOTTOM_RIGHT]),

  /**
   * Can be a function that returns a node, or a node itself, that is
   * rendered on the right side of the Select Menu to give additional
   * information when an option is selected.
   */
  detailView: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),

  /**
   * Can be a function that returns a node, or a node itself, that is
   * rendered in the header section of the Select Menu to customize
   * the header.
   */
  titleView: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),

  /**
   * Can be a function that returns a node, or a node itself, that is
   * rendered instead of the options list when there are no options.
   */
  emptyView: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),

  /*
   * When true, menu closes on option selection.
   */
  closeOnSelect: PropTypes.bool,

  /**
   * Can pass a method that can be used to render custom items in the
   * select menu
   */
  itemRenderer: PropTypes.func,

  /**
   * The height of the items in the select menu list
   */
  itemHeight: PropTypes.number
};
export default SelectMenu;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZWxlY3QtbWVudS9zcmMvU2VsZWN0TWVudS5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsIm1lbW8iLCJ1c2VNZW1vIiwiYXJyaWZ5IiwiUHJvcFR5cGVzIiwiUG9zaXRpb24iLCJTZWFyY2hJY29uIiwiUG9wb3ZlciIsIk9wdGlvblNoYXBlUHJvcFR5cGUiLCJTZWxlY3RlZFByb3BUeXBlIiwiU2VsZWN0TWVudUNvbnRlbnQiLCJub29wIiwiU2VsZWN0TWVudSIsInByb3BzIiwidGl0bGUiLCJ3aWR0aCIsImhlaWdodCIsIm9wdGlvbnMiLCJvblNlbGVjdCIsIm9uRGVzZWxlY3QiLCJvbkZpbHRlckNoYW5nZSIsInNlbGVjdGVkIiwicG9zaXRpb24iLCJCT1RUT01fTEVGVCIsImhhc1RpdGxlIiwiaGFzRmlsdGVyIiwiZmlsdGVyUGxhY2Vob2xkZXIiLCJmaWx0ZXJJY29uIiwiZGV0YWlsVmlldyIsImVtcHR5VmlldyIsInRpdGxlVmlldyIsImlzTXVsdGlTZWxlY3QiLCJjbG9zZU9uU2VsZWN0IiwiaXRlbVJlbmRlcmVyIiwiaXRlbUhlaWdodCIsInJlc3QiLCJzZWxlY3RlZEFycmF5IiwiY2xvc2UiLCJyZW5kZXJJdGVtIiwib3B0aW9uU2l6ZSIsInByb3BUeXBlcyIsInN0cmluZyIsIm9uZU9mVHlwZSIsIm51bWJlciIsImFycmF5T2YiLCJmdW5jIiwiYm9vbCIsImVsZW1lbnRUeXBlIiwiZWxlbWVudCIsIm9uZU9mIiwiVE9QIiwiVE9QX0xFRlQiLCJUT1BfUklHSFQiLCJCT1RUT00iLCJCT1RUT01fUklHSFQiLCJub2RlIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxJQUFoQixFQUFzQkMsT0FBdEIsUUFBcUMsT0FBckM7QUFDQSxPQUFPQyxNQUFQLE1BQW1CLFFBQW5CO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixZQUF0QjtBQUNBLFNBQVNDLFFBQVQsUUFBeUIsaUJBQXpCO0FBQ0EsU0FBU0MsVUFBVCxR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Q2lELFlBTmUsQ0FBaEIsQ0F0RVc7O0FBK0VyQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0UxQixFQUFBQSxVQUFVLEVBQUV4QixTQUFTLENBQUNzQyxTQUFWLENBQW9CLENBQUN0QyxTQUFTLENBQUN5QyxJQUFYLEVBQWlCekMsU0FBUyxDQUFDbUQsSUFBM0IsQ0FBcEIsQ0FwRlM7O0FBc0ZyQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0V6QixFQUFBQSxTQUFTLEVBQUUxQixTQUFTLENBQUNzQyxTQUFWLENBQW9CLENBQUN0QyxTQUFTLENBQUN5QyxJQUFYLEVBQWlCekMsU0FBUyxDQUFDbUQsSUFBM0IsQ0FBcEIsQ0EzRlU7O0FBNkZyQjtBQUNGO0FBQ0E7QUFDQTtBQUNFMUIsRUFBQUEsU0FBUyxFQUFFekIsU0FBUyxDQUFDc0MsU0FBVixDQUFvQixDQUFDdEMsU0FBUyxDQUFDeUMsSUFBWCxFQUFpQnpDLFNBQVMsQ0FBQ21ELElBQTNCLENBQXBCLENBakdVOztBQW1HckI7QUFDRjtBQUNBO0FBQ0V2QixFQUFBQSxhQUFhLEVBQUU1QixTQUFTLENBQUMwQyxJQXRHSjs7QUF3R3JCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0ViLEVBQUFBLFlBQVksRUFBRTdCLFNBQVMsQ0FBQ3lDLElBNUdIOztBQThHckI7QUFDRjtBQUNBO0FBQ0VYLEVBQUFBLFVBQVUsRUFBRTlCLFNBQVMsQ0FBQ3VDO0FBakhELENBQXZCO0FBb0hBLGVBQWUvQixVQUFmIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IG1lbW8sIHVzZU1lbW8gfSBmcm9tICdyZWFjdCdcbmltcG9ydCBhcnJpZnkgZnJvbSAnYXJyaWZ5J1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IHsgUG9zaXRpb24gfSBmcm9tICcuLi8uLi9jb25zdGFudHMnXG5pbXBvcnQgeyBTZWFyY2hJY29uIH0gZnJvbSAnLi4vLi4vaWNvbnMnXG5pbXBvcnQgeyBQb3BvdmVyIH0gZnJvbSAnLi4vLi4vcG9wb3ZlcidcbmltcG9ydCBPcHRpb25TaGFwZVByb3BUeXBlIGZyb20gJy4vT3B0aW9uU2hhcGVQcm9wVHlwZSdcbmltcG9ydCBTZWxlY3RlZFByb3BUeXBlIGZyb20gJy4vU2VsZWN0ZWRQcm9wVHlwZSdcbmltcG9ydCBTZWxlY3RNZW51Q29udGVudCBmcm9tICcuL1NlbGVjdE1lbnVDb250ZW50J1xuXG5jb25zdCBub29wID0gKCkgPT4ge31cblxuY29uc3QgU2VsZWN0TWVudSA9IG1lbW8oZnVuY3Rpb24gU2VsZWN0TWVudShwcm9wcykge1xuICBjb25zdCB7XG4gICAgdGl0bGUsXG4gICAgd2lkdGggPSAyNDAsXG4gICAgaGVpZ2h0ID0gMjQ4LFxuICAgIG9wdGlvbnMsXG4gICAgb25TZWxlY3QgPSBub29wLFxuICAgIG9uRGVzZWxlY3QgPSBub29wLFxuICAgIG9uRmlsdGVyQ2hhbmdlLFxuICAgIHNlbGVjdGVkLFxuICAgIHBvc2l0aW9uID0gUG9zaXRpb24uQk9UVE9NX0xFRlQsXG4gICAgaGFzVGl0bGUsXG4gICAgaGFzRmlsdGVyLFxuICAgIGZpbHRlclBsYWNlaG9sZGVyID0gJ0ZpbHRlci4uLicsXG4gICAgZmlsdGVySWNvbiA9IFNlYXJjaEljb24sXG4gICAgZGV0YWlsVmlldyxcbiAgICBlbXB0eVZpZXcsXG4gICAgdGl0bGVWaWV3LFxuICAgIGlzTXVsdGlTZWxlY3QgPSBmYWxzZSxcbiAgICBjbG9zZU9uU2VsZWN0ID0gZmFsc2UsXG4gICAgaXRlbVJlbmRlcmVyLFxuICAgIGl0ZW1IZWlnaHQsXG4gICAgLi4ucmVzdFxuICB9ID0gcHJvcHNcblxuICBjb25zdCBzZWxlY3RlZEFycmF5ID0gdXNlTWVtbygoKSA9PiBhcnJpZnkoc2VsZWN0ZWQpLCBbc2VsZWN0ZWRdKVxuXG4gIHJldHVybiAoXG4gICAgPFBvcG92ZXJcbiAgICAgIG1pbldpZHRoPXt3aWR0aH1cbiAgICAgIHBvc2l0aW9uPXtwb3NpdGlvbn1cbiAgICAgIG1pbkhlaWdodD17aGVpZ2h0fVxuICAgICAgY29udGVudD17KHsgY2xvc2UgfSkgPT4gKFxuICAgICAgICA8U2VsZWN0TWVudUNvbnRlbnRcbiAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgb3B0aW9ucz17b3B0aW9uc31cbiAgICAgICAgICB0aXRsZT17dGl0bGV9XG4gICAgICAgICAgaGFzRmlsdGVyPXtoYXNGaWx0ZXJ9XG4gICAgICAgICAgZmlsdGVyUGxhY2Vob2xkZXI9e2ZpbHRlclBsYWNlaG9sZGVyfVxuICAgICAgICAgIGZpbHRlckljb249e2ZpbHRlckljb259XG4gICAgICAgICAgaGFzVGl0bGU9e2hhc1RpdGxlfVxuICAgICAgICAgIGlzTXVsdGlTZWxlY3Q9e2lzTXVsdGlTZWxlY3R9XG4gICAgICAgICAgdGl0bGVWaWV3PXt0aXRsZVZpZXd9XG4gICAgICAgICAgbGlzdFByb3BzPXt7XG4gICAgICAgICAgICBvblNlbGVjdCxcbiAgICAgICAgICAgIG9uRGVzZWxlY3QsXG4gICAgICAgICAgICBvbkZpbHRlckNoYW5nZSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZEFycmF5LFxuICAgICAgICAgICAgcmVuZGVySXRlbTogaXRlbVJlbmRlcmVyLFxuICAgICAgICAgICAgb3B0aW9uU2l6ZTogaXRlbUhlaWdodFxuICAgICAgICAgIH19XG4gICAgICAgICAgY2xvc2U9e2Nsb3NlfVxuICAgICAgICAgIGRldGFpbFZpZXc9e3R5cGVvZiBkZXRhaWxWaWV3ID09PSAnZnVuY3Rpb24nID8gZGV0YWlsVmlldyh7IGNsb3NlIH0pIDogZGV0YWlsVmlld31cbiAgICAgICAgICBlbXB0eVZpZXc9e3R5cGVvZiBlbXB0eVZpZXcgPT09ICdmdW5jdGlvbicgPyBlbXB0eVZpZXcoeyBjbG9zZSB9KSA6IGVtcHR5Vmlld31cbiAgICAgICAgICBjbG9zZU9uU2VsZWN0PXtjbG9zZU9uU2VsZWN0fVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHsuLi5yZXN0fVxuICAgIC8+XG4gIClcbn0pXG5cblNlbGVjdE1lbnUucHJvcFR5cGVzID0ge1xuICAvKipcbiAgICogVGhlIHRpdGxlIG9mIHRoZSBTZWxlY3QgTWVudS5cbiAgICovXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIFNlbGVjdCBNZW51LlxuICAgKi9cbiAgd2lkdGg6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcblxuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgU2VsZWN0IE1lbnUuXG4gICAqL1xuICBoZWlnaHQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcblxuICAvKipcbiAgICogVGhlIG9wdGlvbnMgdG8gc2hvdyBpbiB0aGUgbWVudS5cbiAgICogW3sgbGFiZWw6IFN0cmluZywgdmFsdWU6IFN0cmluZyB8IE51bWJlciB9XVxuICAgKi9cbiAgb3B0aW9uczogUHJvcFR5cGVzLmFycmF5T2YoT3B0aW9uU2hhcGVQcm9wVHlwZSksXG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYW4gb3B0aW9uIGlzIHNlbGVjdGVkLlxuICAgKi9cbiAgb25TZWxlY3Q6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGFuIG9wdGlvbiBpcyBkZXNlbGVjdGVkLlxuICAgKi9cbiAgb25EZXNlbGVjdDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIFRoZSBzZWxlY3RlZCB2YWx1ZS92YWx1ZXMuXG4gICAqL1xuICBzZWxlY3RlZDogU2VsZWN0ZWRQcm9wVHlwZSxcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBtdWx0aSBzZWxlY3QgaXMgYWNjb3VudGVkIGZvci5cbiAgICovXG4gIGlzTXVsdGlTZWxlY3Q6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBXaGVuIHRydWUsIHNob3cgdGhlIHRpdGxlLlxuICAgKi9cbiAgaGFzVGl0bGU6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBXaGVuIHRydWUsIHNob3cgdGhlIGZpbHRlci5cbiAgICovXG4gIGhhc0ZpbHRlcjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIFRoZSBwbGFjZWhvbGRlciBvZiB0aGUgc2VhcmNoIGZpbHRlci5cbiAgICovXG4gIGZpbHRlclBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gIC8qKlxuICAgKiBUaGUgaWNvbiBvZiB0aGUgc2VhcmNoIGZpbHRlci5cbiAgICovXG4gIGZpbHRlckljb246IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5lbGVtZW50VHlwZSwgUHJvcFR5cGVzLmVsZW1lbnRdKSxcblxuICAvKipcbiAgICogRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYXMgdGhlIG9uQ2hhbmdlKCkgZXZlbnQgZm9yIHRoZSBmaWx0ZXIuXG4gICAqL1xuICBvbkZpbHRlckNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIFRoZSBwb3NpdGlvbiBvZiB0aGUgU2VsZWN0IE1lbnUuXG4gICAqL1xuICBwb3NpdGlvbjogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICBQb3NpdGlvbi5UT1AsXG4gICAgUG9zaXRpb24uVE9QX0xFRlQsXG4gICAgUG9zaXRpb24uVE9QX1JJR0hULFxuICAgIFBvc2l0aW9uLkJPVFRPTSxcbiAgICBQb3NpdGlvbi5CT1RUT01fTEVGVCxcbiAgICBQb3NpdGlvbi5CT1RUT01fUklHSFRcbiAgXSksXG5cbiAgLyoqXG4gICAqIENhbiBiZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG5vZGUsIG9yIGEgbm9kZSBpdHNlbGYsIHRoYXQgaXNcbiAgICogcmVuZGVyZWQgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIFNlbGVjdCBNZW51IHRvIGdpdmUgYWRkaXRpb25hbFxuICAgKiBpbmZvcm1hdGlvbiB3aGVuIGFuIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgICovXG4gIGRldGFpbFZpZXc6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5mdW5jLCBQcm9wVHlwZXMubm9kZV0pLFxuXG4gIC8qKlxuICAgKiBDYW4gYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBub2RlLCBvciBhIG5vZGUgaXRzZWxmLCB0aGF0IGlzXG4gICAqIHJlbmRlcmVkIGluIHRoZSBoZWFkZXIgc2VjdGlvbiBvZiB0aGUgU2VsZWN0IE1lbnUgdG8gY3VzdG9taXplXG4gICAqIHRoZSBoZWFkZXIuXG4gICAqL1xuICB0aXRsZVZpZXc6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5mdW5jLCBQcm9wVHlwZXMubm9kZV0pLFxuXG4gIC8qKlxuICAgKiBDYW4gYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBub2RlLCBvciBhIG5vZGUgaXRzZWxmLCB0aGF0IGlzXG4gICAqIHJlbmRlcmVkIGluc3RlYWQgb2YgdGhlIG9wdGlvbnMgbGlzdCB3aGVuIHRoZXJlIGFyZSBubyBvcHRpb25zLlxuICAgKi9cbiAgZW1wdHlWaWV3OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuYywgUHJvcFR5cGVzLm5vZGVdKSxcblxuICAvKlxuICAgKiBXaGVuIHRydWUsIG1lbnUgY2xvc2VzIG9uIG9wdGlvbiBzZWxlY3Rpb24uXG4gICAqL1xuICBjbG9zZU9uU2VsZWN0OiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICogQ2FuIHBhc3MgYSBtZXRob2QgdGhhdCBjYW4gYmUgdXNlZCB0byByZW5kZXIgY3VzdG9tIGl0ZW1zIGluIHRoZVxuICAgKiBzZWxlY3QgbWVudVxuICAgKi9cbiAgaXRlbVJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgaXRlbXMgaW4gdGhlIHNlbGVjdCBtZW51IGxpc3RcbiAgICovXG4gIGl0ZW1IZWlnaHQ6IFByb3BUeXBlcy5udW1iZXJcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0TWVudVxuIl19
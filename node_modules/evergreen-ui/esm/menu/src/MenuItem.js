import _extends from "@babel/runtime/helpers/esm/extends";
import _objectWithoutProperties from "@babel/runtime/helpers/esm/objectWithoutProperties";
var _excluded = ["is", "children", "className", "appearance", "disabled", "secondaryText", "intent", "icon", "onSelect"],
    _excluded2 = ["className"];
import React, { memo, forwardRef, useMemo, useCallback } from 'react';
import cx from 'classnames';
import PropTypes from 'prop-types';
import Box from 'ui-box';
import { useClickable, useStyleConfig } from '../../hooks';
import { IconWrapper } from '../../icons/src/IconWrapper';
import { Pane } from '../../layers';
import { Text } from '../../typography';

var noop = function noop() {};

var pseudoSelectors = {
  _hover: '&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):not(:focus):not(:active):hover',
  _focus: '&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):focus, &[aria-selected="true"]',
  _active: '&[aria-current="true"], &[data-isselectable="true"]:active',
  _current: '&[aria-current="true"], &[aria-checked="true"]',
  _isSelectable: '&[data-isselectable="true"]',
  _disabled: '&:disabled, &[aria-disabled="true"]'
};
var internalStyles = {
  display: 'flex',
  alignItems: 'center'
};
var MenuItem = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function MenuItem(props, ref) {
  var _props$is = props.is,
      is = _props$is === void 0 ? 'div' : _props$is,
      children = props.children,
      className = props.className,
      _props$appearance = props.appearance,
      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,
      disabled = props.disabled,
      secondaryText = props.secondaryText,
      _props$intent = props.intent,
      intent = _props$intent === void 0 ? 'none' : _props$intent,
      icon = props.icon,
      _props$onSelect = props.onSelect,
      onSelect = _props$onSelect === void 0 ? noop : _props$onSelect,
      passthroughProps = _objectWithoutProperties(props, _excluded);

  var handleClick = useCallback(function (event) {
    if (disabled) return;
    onSelect(event);
  }, [disabled, onSelect]); // Pass all props, so the hook can handled `disabled`, `onKeyDown`, `tabIndex`
  // and any other explicit props that are passed through to the underlying component

  var _useClickable = useClickable(props),
      onKeyDown = _useClickable.onKeyDown,
      tabIndex = _useClickable.tabIndex;

  var _useStyleConfig = useStyleConfig('MenuItem', {
    appearance: appearance
  }, pseudoSelectors, internalStyles),
      themedClassName = _useStyleConfig.className,
      boxProps = _objectWithoutProperties(_useStyleConfig, _excluded2);

  var iconColor = intent === 'none' ? 'default' : intent;

  if (disabled) {
    iconColor = 'disabled';
  }

  var textColor = disabled ? 'disabled' : intent;
  var secondaryTextColor = disabled ? textColor : 'muted';
  var disabledProps = useMemo(function () {
    return disabled ? {
      backgroundColor: 'tint1',
      cursor: 'not-allowed',
      disabled: true,
      onClick: null,
      onKeyPress: null,
      tabIndex: -1,
      'aria-disabled': 'true',
      'data-isselectable': 'false'
    } : {};
  }, [disabled]);
  return /*#__PURE__*/React.createElement(Pane, _extends({
    is: is,
    role: "menuitem",
    className: cx(themedClassName, className),
    onClick: handleClick,
    "data-isselectable": !disabled || undefined,
    "aria-disabled": disabled,
    ref: ref,
    height: icon ? 40 : 32
  }, boxProps, passthroughProps, disabledProps, {
    tabIndex: tabIndex,
    onKeyDown: onKeyDown
  }), /*#__PURE__*/React.createElement(IconWrapper, {
    icon: icon,
    color: disabled ? 'disabled' : iconColor,
    marginLeft: 16,
    marginRight: -4,
    size: 16,
    flexShrink: 0
  }), /*#__PURE__*/React.createElement(Text, {
    color: textColor,
    marginLeft: 16,
    marginRight: 16,
    flex: 1
  }, children), secondaryText && /*#__PURE__*/React.createElement(Text, {
    marginRight: 16,
    color: secondaryTextColor
  }, secondaryText));
}));
MenuItem.propTypes = {
  /**
   * Element type to use for the menu item.
   * For example: `<MenuItem is={ReactRouterLink}>...</MenuItem>`
   */
  is: Box.propTypes.is,

  /**
   * Class name passed to the component.
   * Only use if you know what you are doing.
   */
  className: PropTypes.string,

  /**
   * Function that is called on click and enter/space keypress.
   */
  onSelect: PropTypes.func,

  /**
   * The Evergreen or custom icon before the label.
   */
  icon: PropTypes.oneOfType([PropTypes.elementType, PropTypes.element]),

  /**
   * The children of the component.
   */
  children: PropTypes.node,

  /**
   * Secondary text shown on the right.
   */
  secondaryText: PropTypes.node,

  /**
   * The default theme only supports one default appearance.
   */
  appearance: PropTypes.string,

  /**
   * The intent of the menu item.
   */
  intent: PropTypes.oneOf(['none', 'success', 'warning', 'danger']),

  /**
   * Flag to indicate whether the menu item is disabled or not
   */
  disabled: PropTypes.bool
};
export default MenuItem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tZW51L3NyYy9NZW51SXRlbS5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsIm1lbW8iLCJmb3J3YXJkUmVmIiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwiY3giLCJQcm9wVHlwZXMiLCJCb3giLCJ1c2VDbGlja2FibGUiLCJ1c2VTdHlsZUNvbmZpZyIsIkljb25XcmFwcGVyIiwiUGFuZSIsIlRleHQiLCJub29wIiwicHNldWRvU2VsZWN0b3JzIiwiX2hvdmVyIiwiX2ZvY3VzIiwiX2FjdGl2ZSIsIl9jdXJyZW50IiwiX2lzU2VsZWN0YWJsZSIsIl9kaXNhYmxlZCIsImludGVybmFsU3R5bGVzIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJNZW51SXRlbSIsInByb3BzIiwicmVmIiwiaXMiLCJjaGlsZHJlbiIsImNsYXNzTmFtZSIsImFwcGVhcmFuY2UiLCJkaXNhYmxlZCIsInNlY29uZGFyeVRleHQiLCJpbnRlbnQiLCJpY29uIiwib25TZWxlY3QiLCJwYXNzdGhyb3VnaFByb3BzIiwiaGFuZGxlQ2xpY2siLCJldmVudCIsIm9uS2V5RG93biIsInRhYkluZGV4IiwidGhlbWVkQ2xhc3NOYW1lIiwiYm94UHJvcHMiLCJpY29uQ29sb3IiLCJ0ZXh0Q29sb3IiLCJzZWNvbmRhcnlUZXh0Q29sb3IiLCJkaXNhYmxlZFByb3BzIiwiYmFja2dyb3VuZENvbG9yIiwiY3Vyc29yIiwib25DbGljayIsIm9uS2V5UHJlc3MiLCJ1bmRlZmluZWQiLCJwcm9wVHlwZXMiLCJzdHJpbmciLCJmdW5jIiwib25lT2ZUeXBlIiwiZWxlbWVudFR5cGUiLCJlbGVtZW50Iiwibm9kZSIsIm9uZU9mIiwiYm9vbCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU9BLEtBQVAsSUFBZ0JDLElBQWhCLEVBQXNCQyxVQUF0QixFQUFrQ0MsT0FBbEMsRUFBMkNDLFdBQTNDLFFBQThELE9BQTlEO0FBQ0EsT0FBT0MsRUFBUCxNQUFlLFlBQWY7QUFDQSxPQUFPQyxTQUFQLE1B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c0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IG1lbW8sIGZvcndhcmRSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcydcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCBCb3ggZnJvbSAndWktYm94J1xuaW1wb3J0IHsgdXNlQ2xpY2thYmxlLCB1c2VTdHlsZUNvbmZpZyB9IGZyb20gJy4uLy4uL2hvb2tzJ1xuaW1wb3J0IHsgSWNvbldyYXBwZXIgfSBmcm9tICcuLi8uLi9pY29ucy9zcmMvSWNvbldyYXBwZXInXG5pbXBvcnQgeyBQYW5lIH0gZnJvbSAnLi4vLi4vbGF5ZXJzJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uLy4uL3R5cG9ncmFwaHknXG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fVxuXG5jb25zdCBwc2V1ZG9TZWxlY3RvcnMgPSB7XG4gIF9ob3ZlcjpcbiAgICAnJltkYXRhLWlzc2VsZWN0YWJsZT1cInRydWVcIl06bm90KFthcmlhLWN1cnJlbnQ9XCJ0cnVlXCJdKTpub3QoW2FyaWEtY2hlY2tlZD1cInRydWVcIl0pOm5vdCg6Zm9jdXMpOm5vdCg6YWN0aXZlKTpob3ZlcicsXG4gIF9mb2N1czpcbiAgICAnJltkYXRhLWlzc2VsZWN0YWJsZT1cInRydWVcIl06bm90KFthcmlhLWN1cnJlbnQ9XCJ0cnVlXCJdKTpub3QoW2FyaWEtY2hlY2tlZD1cInRydWVcIl0pOmZvY3VzLCAmW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJyxcbiAgX2FjdGl2ZTogJyZbYXJpYS1jdXJyZW50PVwidHJ1ZVwiXSwgJltkYXRhLWlzc2VsZWN0YWJsZT1cInRydWVcIl06YWN0aXZlJyxcbiAgX2N1cnJlbnQ6ICcmW2FyaWEtY3VycmVudD1cInRydWVcIl0sICZbYXJpYS1jaGVja2VkPVwidHJ1ZVwiXScsXG4gIF9pc1NlbGVjdGFibGU6ICcmW2RhdGEtaXNzZWxlY3RhYmxlPVwidHJ1ZVwiXScsXG4gIF9kaXNhYmxlZDogJyY6ZGlzYWJsZWQsICZbYXJpYS1kaXNhYmxlZD1cInRydWVcIl0nXG59XG5cbmNvbnN0IGludGVybmFsU3R5bGVzID0ge1xuICBkaXNwbGF5OiAnZmxleCcsXG4gIGFsaWduSXRlbXM6ICdjZW50ZXInXG59XG5cbmNvbnN0IE1lbnVJdGVtID0gbWVtbyhcbiAgZm9yd2FyZFJlZihmdW5jdGlvbiBNZW51SXRlbShwcm9wcywgcmVmKSB7XG4gICAgY29uc3Qge1xuICAgICAgaXMgPSAnZGl2JyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgYXBwZWFyYW5jZSA9ICdkZWZhdWx0JyxcbiAgICAgIGRpc2FibGVkLFxuICAgICAgc2Vjb25kYXJ5VGV4dCxcbiAgICAgIGludGVudCA9ICdub25lJyxcbiAgICAgIGljb24sXG4gICAgICBvblNlbGVjdCA9IG5vb3AsXG4gICAgICAuLi5wYXNzdGhyb3VnaFByb3BzXG4gICAgfSA9IHByb3BzXG5cbiAgICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKFxuICAgICAgZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVyblxuICAgICAgICBvblNlbGVjdChldmVudClcbiAgICAgIH0sXG4gICAgICBbZGlzYWJsZWQsIG9uU2VsZWN0XVxuICAgIClcblxuICAgIC8vIFBhc3MgYWxsIHByb3BzLCBzbyB0aGUgaG9vayBjYW4gaGFuZGxlZCBgZGlzYWJsZWRgLCBgb25LZXlEb3duYCwgYHRhYkluZGV4YFxuICAgIC8vIGFuZCBhbnkgb3RoZXIgZXhwbGljaXQgcHJvcHMgdGhhdCBhcmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIHVuZGVybHlpbmcgY29tcG9uZW50XG4gICAgY29uc3QgeyBvbktleURvd24sIHRhYkluZGV4IH0gPSB1c2VDbGlja2FibGUocHJvcHMpXG5cbiAgICBjb25zdCB7IGNsYXNzTmFtZTogdGhlbWVkQ2xhc3NOYW1lLCAuLi5ib3hQcm9wcyB9ID0gdXNlU3R5bGVDb25maWcoXG4gICAgICAnTWVudUl0ZW0nLFxuICAgICAgeyBhcHBlYXJhbmNlIH0sXG4gICAgICBwc2V1ZG9TZWxlY3RvcnMsXG4gICAgICBpbnRlcm5hbFN0eWxlc1xuICAgIClcblxuICAgIGxldCBpY29uQ29sb3IgPSBpbnRlbnQgPT09ICdub25lJyA/ICdkZWZhdWx0JyA6IGludGVudFxuXG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICBpY29uQ29sb3IgPSAnZGlzYWJsZWQnXG4gICAgfVxuXG4gICAgY29uc3QgdGV4dENvbG9yID0gZGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogaW50ZW50XG5cbiAgICBjb25zdCBzZWNvbmRhcnlUZXh0Q29sb3IgPSBkaXNhYmxlZCA/IHRleHRDb2xvciA6ICdtdXRlZCdcblxuICAgIGNvbnN0IGRpc2FibGVkUHJvcHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBkaXNhYmxlZFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RpbnQxJyxcbiAgICAgICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgb25DbGljazogbnVsbCxcbiAgICAgICAgICAgIG9uS2V5UHJlc3M6IG51bGwsXG4gICAgICAgICAgICB0YWJJbmRleDogLTEsXG4gICAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6ICd0cnVlJyxcbiAgICAgICAgICAgICdkYXRhLWlzc2VsZWN0YWJsZSc6ICdmYWxzZSdcbiAgICAgICAgICB9XG4gICAgICAgIDoge31cbiAgICB9LCBbZGlzYWJsZWRdKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQYW5lXG4gICAgICAgIGlzPXtpc31cbiAgICAgICAgcm9sZT1cIm1lbnVpdGVtXCJcbiAgICAgICAgY2xhc3NOYW1lPXtjeCh0aGVtZWRDbGFzc05hbWUsIGNsYXNzTmFtZSl9XG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfVxuICAgICAgICBkYXRhLWlzc2VsZWN0YWJsZT17IWRpc2FibGVkIHx8IHVuZGVmaW5lZH1cbiAgICAgICAgYXJpYS1kaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBoZWlnaHQ9e2ljb24gPyA0MCA6IDMyfVxuICAgICAgICB7Li4uYm94UHJvcHN9XG4gICAgICAgIHsuLi5wYXNzdGhyb3VnaFByb3BzfVxuICAgICAgICB7Li4uZGlzYWJsZWRQcm9wc31cbiAgICAgICAgdGFiSW5kZXg9e3RhYkluZGV4fVxuICAgICAgICBvbktleURvd249e29uS2V5RG93bn1cbiAgICAgID5cbiAgICAgICAgPEljb25XcmFwcGVyXG4gICAgICAgICAgaWNvbj17aWNvbn1cbiAgICAgICAgICBjb2xvcj17ZGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogaWNvbkNvbG9yfVxuICAgICAgICAgIG1hcmdpbkxlZnQ9ezE2fVxuICAgICAgICAgIG1hcmdpblJpZ2h0PXstNH1cbiAgICAgICAgICBzaXplPXsxNn1cbiAgICAgICAgICBmbGV4U2hyaW5rPXswfVxuICAgICAgICAvPlxuICAgICAgICA8VGV4dCBjb2xvcj17dGV4dENvbG9yfSBtYXJnaW5MZWZ0PXsxNn0gbWFyZ2luUmlnaHQ9ezE2fSBmbGV4PXsxfT5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvVGV4dD5cbiAgICAgICAge3NlY29uZGFyeVRleHQgJiYgKFxuICAgICAgICAgIDxUZXh0IG1hcmdpblJpZ2h0PXsxNn0gY29sb3I9e3NlY29uZGFyeVRleHRDb2xvcn0+XG4gICAgICAgICAgICB7c2Vjb25kYXJ5VGV4dH1cbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICl9XG4gICAgICA8L1BhbmU+XG4gICAgKVxuICB9KVxuKVxuXG5NZW51SXRlbS5wcm9wVHlwZXMgPSB7XG4gIC8qKlxuICAgKiBFbGVtZW50IHR5cGUgdG8gdXNlIGZvciB0aGUgbWVudSBpdGVtLlxuICAgKiBGb3IgZXhhbXBsZTogYDxNZW51SXRlbSBpcz17UmVhY3RSb3V0ZXJMaW5rfT4uLi48L01lbnVJdGVtPmBcbiAgICovXG4gIGlzOiBCb3gucHJvcFR5cGVzLmlzLFxuXG4gIC8qKlxuICAgKiBDbGFzcyBuYW1lIHBhc3NlZCB0byB0aGUgY29tcG9uZW50LlxuICAgKiBPbmx5IHVzZSBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAqL1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIG9uIGNsaWNrIGFuZCBlbnRlci9zcGFjZSBrZXlwcmVzcy5cbiAgICovXG4gIG9uU2VsZWN0OiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogVGhlIEV2ZXJncmVlbiBvciBjdXN0b20gaWNvbiBiZWZvcmUgdGhlIGxhYmVsLlxuICAgKi9cbiAgaWNvbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmVsZW1lbnRUeXBlLCBQcm9wVHlwZXMuZWxlbWVudF0pLFxuXG4gIC8qKlxuICAgKiBUaGUgY2hpbGRyZW4gb2YgdGhlIGNvbXBvbmVudC5cbiAgICovXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcblxuICAvKipcbiAgICogU2Vjb25kYXJ5IHRleHQgc2hvd24gb24gdGhlIHJpZ2h0LlxuICAgKi9cbiAgc2Vjb25kYXJ5VGV4dDogUHJvcFR5cGVzLm5vZGUsXG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRoZW1lIG9ubHkgc3VwcG9ydHMgb25lIGRlZmF1bHQgYXBwZWFyYW5jZS5cbiAgICovXG4gIGFwcGVhcmFuY2U6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgLyoqXG4gICAqIFRoZSBpbnRlbnQgb2YgdGhlIG1lbnUgaXRlbS5cbiAgICovXG4gIGludGVudDogUHJvcFR5cGVzLm9uZU9mKFsnbm9uZScsICdzdWNjZXNzJywgJ3dhcm5pbmcnLCAnZGFuZ2VyJ10pLFxuXG4gIC8qKlxuICAgKiBGbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgdGhlIG1lbnUgaXRlbSBpcyBkaXNhYmxlZCBvciBub3RcbiAgICovXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbFxufVxuXG5leHBvcnQgZGVmYXVsdCBNZW51SXRlbVxuIl19